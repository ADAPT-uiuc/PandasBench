{
  "max-mem-in-mb": 873,
  "max-mem-in-mb2": 1108,
  "cells": [
    {
      "raw": "from datetime import date\n# import pandas as pd\nexec(os.environ['IREWR_IMPORTS'])\nimport numpy as np\n# ALEX: remove plotting\n# import matplotlib.pyplot as graphic\n\n# from math import sqrt, factorial, log, ceil\n# from sklearn.neighbors import KNeighborsClassifier\n# from sklearn.model_selection import cross_val_score\n\n# from sklearn.model_selection import train_test_split\n# from sklearn.preprocessing import LabelEncoder\n\n# import matplotlib.pyplot as plt\n# import seaborn as sns\n# import random \n# import warnings\n# import operator\n# warnings.filterwarnings(\"ignore\")",
      "rewrite-ns": 811783,
      "overhead-ns": 811783,
      "exec-ns": 455061,
      "total-ns": 1266844,
      "patts-hit": {},
      "rewritten": "from datetime import date\nexec(os.environ['IREWR_IMPORTS'])\nimport numpy as np\n"
    },
    {
      "raw": "train = pd.read_csv('./input/train.scaled.csv')\ntest = pd.read_csv('./input/test.scaled.csv')",
      "rewrite-ns": 922552,
      "overhead-ns": 922552,
      "exec-ns": 1174661569,
      "total-ns": 1175584121,
      "patts-hit": {},
      "rewritten": "train = pd.read_csv('./input/train.scaled.csv')\ntest = pd.read_csv('./input/test.scaled.csv')\n"
    },
    {
      "raw": "target_name = 'Target'\nprint (\"Tamanho train: \", train.shape)\nprint (\"Tamanho test: \", test.shape)",
      "rewrite-ns": 837578,
      "overhead-ns": 837578,
      "exec-ns": 379387,
      "total-ns": 1216965,
      "patts-hit": {},
      "rewritten": "target_name = 'Target'\nprint('Tamanho train: ', train.shape)\nprint('Tamanho test: ', test.shape)\n"
    },
    {
      "raw": "train.describe()",
      "rewrite-ns": 99309,
      "overhead-ns": 99309,
      "exec-ns": 293572069,
      "total-ns": 293671378,
      "patts-hit": {},
      "rewritten": "train.describe()\n"
    },
    {
      "raw": "from collections import OrderedDict\n\n# ALEX: remove plotting\n# plt.figure(figsize = (15, 12))\n# plt.style.use('fivethirtyeight')\n\ncolors = OrderedDict({1: 'red', 2: 'orange', 3: 'yellow', 4: 'green'})\npoverty_mapping = OrderedDict({1: 'extreme', 2: 'moderate', 3: 'vulnerable', 4: 'non vulnerable'})\n\nfor i, col in enumerate(train.select_dtypes('float')):\n# ALEX: remove plotting\n#     ax = plt.subplot(4, 2, i + 1)\n    for poverty_level, color in colors.items():\n# ALEX: remove plotting\n#         sns.kdeplot(train.loc[train['Target'] == poverty_level, col].dropna(), \n#                     ax = ax, color = color, label = poverty_mapping[poverty_level])\n        _ = train.loc[train['Target'] == poverty_level, col].dropna()\n\n# ALEX: remove plotting\n#     plt.title(f'{col.capitalize()} Distribution'); plt.xlabel(f'{col}'); plt.ylabel('Density')\n    _ = col.capitalize()\n\n# ALEX: remove plotting\n# plt.subplots_adjust(top = 2)",
      "rewrite-ns": 3021009,
      "overhead-ns": 3021009,
      "exec-ns": 15310585,
      "total-ns": 18331594,
      "patts-hit": {},
      "rewritten": "from collections import OrderedDict\ncolors = OrderedDict({(1): 'red', (2): 'orange', (3): 'yellow', (4): 'green'})\npoverty_mapping = OrderedDict({(1): 'extreme', (2): 'moderate', (3):\n    'vulnerable', (4): 'non vulnerable'})\nfor i, col in enumerate(train.select_dtypes('float')):\n    for poverty_level, color in colors.items():\n        _ = train.loc[train['Target'] == poverty_level, col].dropna()\n    _ = col.capitalize()\n"
    },
    {
      "raw": "train.select_dtypes('object').head()",
      "rewrite-ns": 444262,
      "overhead-ns": 444262,
      "exec-ns": 5536893,
      "total-ns": 5981155,
      "patts-hit": {},
      "rewritten": "train.select_dtypes('object').head()\n"
    },
    {
      "raw": "mapping = {\"yes\": 1, \"no\": 0}\n\nfor df in [train, test]:\n    df['dependency'] = df['dependency'].replace(mapping).astype(np.float64)\n    df['edjefa'] = df['edjefa'].replace(mapping).astype(np.float64)\n    df['edjefe'] = df['edjefe'].replace(mapping).astype(np.float64)\n\ntrain[['dependency', 'edjefa', 'edjefe']].describe()",
      "rewrite-ns": 3025070,
      "overhead-ns": 3025070,
      "exec-ns": 96144209,
      "total-ns": 99169279,
      "patts-hit": {},
      "rewritten": "mapping = {'yes': 1, 'no': 0}\nfor df in [train, test]:\n    df['dependency'] = df['dependency'].replace(mapping).astype(np.float64)\n    df['edjefa'] = df['edjefa'].replace(mapping).astype(np.float64)\n    df['edjefe'] = df['edjefe'].replace(mapping).astype(np.float64)\ntrain[['dependency', 'edjefa', 'edjefe']].describe()\n"
    },
    {
      "raw": "# ALEX: remove plotting\n# plt.figure(figsize = (8, 8))\n\nfor i, col in enumerate(['dependency', 'edjefa', 'edjefe']):\n# ALEX: remove plotting\n#     ax = plt.subplot(3, 1, i + 1)\n \n    for poverty_level, color in colors.items():\n        \n# ALEX: remove plotting\n#         sns.kdeplot(train.loc[train['Target'] == poverty_level, col].dropna(), \n#                     ax = ax, color = color, label = poverty_mapping[poverty_level])\n        _ = train.loc[train['Target'] == poverty_level, col].dropna()\n        \n# ALEX: remove plotting\n#     plt.title(f'{col.capitalize()} Distribution'); plt.xlabel(f'{col}'); plt.ylabel('Density')\n\n# plt.subplots_adjust(top = 2)",
      "rewrite-ns": 1616455,
      "overhead-ns": 1616455,
      "exec-ns": 5762744,
      "total-ns": 7379199,
      "patts-hit": {},
      "rewritten": "for i, col in enumerate(['dependency', 'edjefa', 'edjefe']):\n    for poverty_level, color in colors.items():\n        _ = train.loc[train['Target'] == poverty_level, col].dropna()\n"
    },
    {
      "raw": "test['Target'] = np.nan\ndata = train.append(test, ignore_index = True)",
      "rewrite-ns": 775319,
      "overhead-ns": 775319,
      "exec-ns": 106663991,
      "total-ns": 107439310,
      "patts-hit": {},
      "rewritten": "test['Target'] = np.nan\ndata = train.append(test, ignore_index=True)\n"
    },
    {
      "raw": "all_equal = train.groupby('idhogar')['Target'].apply(lambda x: x.nunique() == 1)\n\nnot_equal = all_equal[all_equal != True]",
      "rewrite-ns": 1364738,
      "overhead-ns": 1364738,
      "exec-ns": 112889733,
      "total-ns": 114254471,
      "patts-hit": {},
      "rewritten": "all_equal = train.groupby('idhogar')['Target'].apply(lambda x: x.nunique() == 1\n    )\nnot_equal = all_equal[all_equal != True]\n"
    },
    {
      "raw": "households_leader = train.groupby('idhogar')['parentesco1'].sum()\nhouseholds_no_head = train.loc[train['idhogar'].isin(households_leader[households_leader == 0].index), :]\nhouseholds_no_head_equal = households_no_head.groupby('idhogar')['Target'].apply(lambda x: x.nunique() == 1)",
      "rewrite-ns": 2398992,
      "overhead-ns": 2398992,
      "exec-ns": 7400061,
      "total-ns": 9799053,
      "patts-hit": {},
      "rewritten": "households_leader = train.groupby('idhogar')['parentesco1'].sum()\nhouseholds_no_head = train.loc[train['idhogar'].isin(households_leader[\n    households_leader == 0].index), :]\nhouseholds_no_head_equal = households_no_head.groupby('idhogar')['Target'\n    ].apply(lambda x: x.nunique() == 1)\n"
    },
    {
      "raw": "for household in not_equal.index:\n# ALEX: make notebook run with input scaling\n#     true_target = int(train[(train['idhogar'] == household) & (train['parentesco1'] == 1.0)]['Target'])\n    true_target = int(train[(train['idhogar'] == household) & (train['parentesco1'] == 1.0)].iloc[0]['Target'])\n    train.loc[train['idhogar'] == household, 'Target'] = true_target\n    \nall_equal = train.groupby('idhogar')['Target'].apply(lambda x: x.nunique() == 1)\nnot_equal = all_equal[all_equal != True]",
      "rewrite-ns": 3015378,
      "overhead-ns": 3015378,
      "exec-ns": 515779305,
      "total-ns": 518794683,
      "patts-hit": {},
      "rewritten": "for household in not_equal.index:\n    true_target = int(train[(train['idhogar'] == household) & (train[\n        'parentesco1'] == 1.0)].iloc[0]['Target'])\n    train.loc[train['idhogar'] == household, 'Target'] = true_target\nall_equal = train.groupby('idhogar')['Target'].apply(lambda x: x.nunique() == 1\n    )\nnot_equal = all_equal[all_equal != True]\n"
    },
    {
      "raw": "print('\\n Missing Values')\nmissing = pd.DataFrame(data.isnull().sum()).rename(columns = {0: 'total'})\nmissing['percent'] = missing['total'] / len(data)\nmissing.sort_values('percent', ascending = False).head(10).drop('Target')",
      "rewrite-ns": 1686096,
      "overhead-ns": 1686096,
      "exec-ns": 54776109,
      "total-ns": 56462205,
      "patts-hit": {
        "SortHead": 1
      },
      "rewritten": "print('\\n Missing Values')\nmissing = pd.DataFrame(data.isnull().sum()).rename(columns={(0): 'total'})\nmissing['percent'] = missing['total'] / len(data)\ndias.rewriter.sort_head(called_on=missing, by='percent', n=10, asc=False,\n    orig=lambda _DIAS_x: _DIAS_x.sort_values('percent', ascending=False).\n    head(10)).drop('Target')\n"
    },
    {
      "raw": "def plot_value_counts(df, col, heads_only = False):\n    if heads_only:\n        df = df.loc[df['parentesco1'] == 1].copy()\n        \n# ALEX: remove plotting\n#     plt.figure(figsize = (8, 6))\n#     df[col].value_counts().sort_index().plot.bar(color = 'blue',\n#                                                  edgecolor = 'k',\n#                                                  linewidth = 2)\n#     plt.xlabel(f'{col}'); plt.title(f'{col} Value Counts'); plt.ylabel('Count')\n#     plt.show();\n    df[col].value_counts().sort_index()",
      "rewrite-ns": 1339402,
      "overhead-ns": 1339402,
      "exec-ns": 420804,
      "total-ns": 1760206,
      "patts-hit": {},
      "rewritten": "def plot_value_counts(df, col, heads_only=False):\n    if heads_only:\n        df = df.loc[df['parentesco1'] == 1].copy()\n    df[col].value_counts().sort_index()\n"
    },
    {
      "raw": "data['v18q1'] = data['v18q1'].fillna(0)",
      "rewrite-ns": 383477,
      "overhead-ns": 383477,
      "exec-ns": 1127427,
      "total-ns": 1510904,
      "patts-hit": {
        "IsInplaceUpdate": 1
      },
      "rewritten": "_DIAS_ser = data['v18q1']\nif type(_DIAS_ser) != pd.Series:\n    data['v18q1'] = data['v18q1'].fillna(0)\nelse:\n    data['v18q1'].fillna(0, inplace=True)\n"
    },
    {
      "raw": "own_variables = [x for x in data if x.startswith('tipo')]\n# ALEX: remove plotting\n# data.loc[data['v2a1'].isnull(), own_variables].sum().plot.bar(figsize = (8, 6),\n#                                                                         color = 'blue',\n#                                                               edgecolor = 'k', linewidth = 2);\n# plt.xticks([0, 1, 2, 3, 4],\n#            ['Owns and Paid Off', 'Owns and Paying', 'Rented', 'Precarious', 'Other'],\n#           rotation = 60)\n# plt.title('Home Ownership Status for Households Missing Rent Payments', size = 18);\ndata.loc[data['v2a1'].isnull(), own_variables].sum()",
      "rewrite-ns": 1235978,
      "overhead-ns": 1235978,
      "exec-ns": 173190545,
      "total-ns": 174426523,
      "patts-hit": {},
      "rewritten": "own_variables = [x for x in data if x.startswith('tipo')]\ndata.loc[data['v2a1'].isnull(), own_variables].sum()\n"
    },
    {
      "raw": "data.loc[(data['tipovivi1'] == 1), 'v2a1'] = 0\ndata['v2a1-missing'] = data['v2a1'].isnull()\ndata['v2a1-missing'].value_counts()",
      "rewrite-ns": 1420862,
      "overhead-ns": 1420862,
      "exec-ns": 3606412,
      "total-ns": 5027274,
      "patts-hit": {},
      "rewritten": "data.loc[data['tipovivi1'] == 1, 'v2a1'] = 0\ndata['v2a1-missing'] = data['v2a1'].isnull()\ndata['v2a1-missing'].value_counts()\n"
    },
    {
      "raw": "data.loc[((data['age'] > 19) | (data['age'] < 7)) & (data['rez_esc'].isnull()), 'rez_esc'] = 0\ndata['rez_esc-missing'] = data['rez_esc'].isnull()\ndata.loc[data['rez_esc'] > 5, 'rez_esc'] = 5",
      "rewrite-ns": 2240387,
      "overhead-ns": 2240387,
      "exec-ns": 3455894,
      "total-ns": 5696281,
      "patts-hit": {},
      "rewritten": "data.loc[((data['age'] > 19) | (data['age'] < 7)) & data['rez_esc'].isnull(\n    ), 'rez_esc'] = 0\ndata['rez_esc-missing'] = data['rez_esc'].isnull()\ndata.loc[data['rez_esc'] > 5, 'rez_esc'] = 5\n"
    },
    {
      "raw": "id_ = ['Id', 'idhogar', 'Target']\nind_bool = ['v18q', 'dis', 'male', 'female', 'estadocivil1', 'estadocivil2', 'estadocivil3', \n            'estadocivil4', 'estadocivil5', 'estadocivil6', 'estadocivil7', \n            'parentesco1', 'parentesco2',  'parentesco3', 'parentesco4', 'parentesco5', \n            'parentesco6', 'parentesco7', 'parentesco8',  'parentesco9', 'parentesco10', \n            'parentesco11', 'parentesco12', 'instlevel1', 'instlevel2', 'instlevel3', \n            'instlevel4', 'instlevel5', 'instlevel6', 'instlevel7', 'instlevel8', \n            'instlevel9', 'mobilephone', 'rez_esc-missing']\nind_ordered = ['rez_esc', 'escolari', 'age']\nhh_bool = ['hacdor', 'hacapo', 'v14a', 'refrig', 'paredblolad', 'paredzocalo', \n           'paredpreb','pisocemento', 'pareddes', 'paredmad',\n           'paredzinc', 'paredfibras', 'paredother', 'pisomoscer', 'pisoother', \n           'pisonatur', 'pisonotiene', 'pisomadera',\n           'techozinc', 'techoentrepiso', 'techocane', 'techootro', 'cielorazo', \n           'abastaguadentro', 'abastaguafuera', 'abastaguano',\n            'public', 'planpri', 'noelec', 'coopele', 'sanitario1', \n           'sanitario2', 'sanitario3', 'sanitario5',   'sanitario6',\n           'energcocinar1', 'energcocinar2', 'energcocinar3', 'energcocinar4', \n           'elimbasu1', 'elimbasu2', 'elimbasu3', 'elimbasu4', \n           'elimbasu5', 'elimbasu6', 'epared1', 'epared2', 'epared3',\n           'etecho1', 'etecho2', 'etecho3', 'eviv1', 'eviv2', 'eviv3', \n           'tipovivi1', 'tipovivi2', 'tipovivi3', 'tipovivi4', 'tipovivi5', \n           'computer', 'television', 'lugar1', 'lugar2', 'lugar3',\n           'lugar4', 'lugar5', 'lugar6', 'area1', 'area2', 'v2a1-missing']\nhh_ordered = [ 'rooms', 'r4h1', 'r4h2', 'r4h3', 'r4m1','r4m2','r4m3', 'r4t1',  'r4t2', \n              'r4t3', 'v18q1', 'tamhog','tamviv','hhsize','hogar_nin',\n              'hogar_adul','hogar_mayor','hogar_total',  'bedrooms', 'qmobilephone']\nhh_cont = ['v2a1', 'dependency', 'edjefe', 'edjefa', 'meaneduc', 'overcrowding']\nsqr_ = ['SQBescolari', 'SQBage', 'SQBhogar_total', 'SQBedjefe', \n        'SQBhogar_nin', 'SQBovercrowding', 'SQBdependency', 'SQBmeaned', 'agesq']",
      "rewrite-ns": 6172578,
      "overhead-ns": 6172578,
      "exec-ns": 1460153,
      "total-ns": 7632731,
      "patts-hit": {},
      "rewritten": "id_ = ['Id', 'idhogar', 'Target']\nind_bool = ['v18q', 'dis', 'male', 'female', 'estadocivil1', 'estadocivil2',\n    'estadocivil3', 'estadocivil4', 'estadocivil5', 'estadocivil6',\n    'estadocivil7', 'parentesco1', 'parentesco2', 'parentesco3',\n    'parentesco4', 'parentesco5', 'parentesco6', 'parentesco7',\n    'parentesco8', 'parentesco9', 'parentesco10', 'parentesco11',\n    'parentesco12', 'instlevel1', 'instlevel2', 'instlevel3', 'instlevel4',\n    'instlevel5', 'instlevel6', 'instlevel7', 'instlevel8', 'instlevel9',\n    'mobilephone', 'rez_esc-missing']\nind_ordered = ['rez_esc', 'escolari', 'age']\nhh_bool = ['hacdor', 'hacapo', 'v14a', 'refrig', 'paredblolad',\n    'paredzocalo', 'paredpreb', 'pisocemento', 'pareddes', 'paredmad',\n    'paredzinc', 'paredfibras', 'paredother', 'pisomoscer', 'pisoother',\n    'pisonatur', 'pisonotiene', 'pisomadera', 'techozinc', 'techoentrepiso',\n    'techocane', 'techootro', 'cielorazo', 'abastaguadentro',\n    'abastaguafuera', 'abastaguano', 'public', 'planpri', 'noelec',\n    'coopele', 'sanitario1', 'sanitario2', 'sanitario3', 'sanitario5',\n    'sanitario6', 'energcocinar1', 'energcocinar2', 'energcocinar3',\n    'energcocinar4', 'elimbasu1', 'elimbasu2', 'elimbasu3', 'elimbasu4',\n    'elimbasu5', 'elimbasu6', 'epared1', 'epared2', 'epared3', 'etecho1',\n    'etecho2', 'etecho3', 'eviv1', 'eviv2', 'eviv3', 'tipovivi1',\n    'tipovivi2', 'tipovivi3', 'tipovivi4', 'tipovivi5', 'computer',\n    'television', 'lugar1', 'lugar2', 'lugar3', 'lugar4', 'lugar5',\n    'lugar6', 'area1', 'area2', 'v2a1-missing']\nhh_ordered = ['rooms', 'r4h1', 'r4h2', 'r4h3', 'r4m1', 'r4m2', 'r4m3',\n    'r4t1', 'r4t2', 'r4t3', 'v18q1', 'tamhog', 'tamviv', 'hhsize',\n    'hogar_nin', 'hogar_adul', 'hogar_mayor', 'hogar_total', 'bedrooms',\n    'qmobilephone']\nhh_cont = ['v2a1', 'dependency', 'edjefe', 'edjefa', 'meaneduc', 'overcrowding'\n    ]\nsqr_ = ['SQBescolari', 'SQBage', 'SQBhogar_total', 'SQBedjefe',\n    'SQBhogar_nin', 'SQBovercrowding', 'SQBdependency', 'SQBmeaned', 'agesq']\n"
    },
    {
      "raw": "data = data.drop(columns = sqr_)",
      "rewrite-ns": 397134,
      "overhead-ns": 397134,
      "exec-ns": 54793670,
      "total-ns": 55190804,
      "patts-hit": {},
      "rewritten": "data = data.drop(columns=sqr_)\n"
    },
    {
      "raw": "heads = data.loc[data['parentesco1'] == 1, :]\nheads = heads[id_ + hh_bool + hh_cont + hh_ordered]\nheads = heads.drop(columns = ['tamhog', 'hogar_total', 'r4t3'])",
      "rewrite-ns": 1728332,
      "overhead-ns": 1728332,
      "exec-ns": 39744698,
      "total-ns": 41473030,
      "patts-hit": {},
      "rewritten": "heads = data.loc[data['parentesco1'] == 1, :]\nheads = heads[id_ + hh_bool + hh_cont + hh_ordered]\nheads = heads.drop(columns=['tamhog', 'hogar_total', 'r4t3'])\n"
    },
    {
      "raw": "elec = []\nfor i, row in heads.iterrows():\n    if row['noelec'] == 1:\n        elec.append(0)\n    elif row['coopele'] == 1:\n        elec.append(1)\n    elif row['public'] == 1:\n        elec.append(2)\n    elif row['planpri'] == 1:\n        elec.append(3)\n    else:\n        elec.append(np.nan)\n        \nheads['elec'] = elec\nheads['elec-missing'] = heads['elec'].isnull()\nheads = heads.drop(columns = ['noelec', 'coopele', 'public', 'planpri'])",
      "rewrite-ns": 3883049,
      "overhead-ns": 3883049,
      "exec-ns": 1960111151,
      "total-ns": 1963994200,
      "patts-hit": {},
      "rewritten": "elec = []\nfor i, row in heads.iterrows():\n    if row['noelec'] == 1:\n        elec.append(0)\n    elif row['coopele'] == 1:\n        elec.append(1)\n    elif row['public'] == 1:\n        elec.append(2)\n    elif row['planpri'] == 1:\n        elec.append(3)\n    else:\n        elec.append(np.nan)\nheads['elec'] = elec\nheads['elec-missing'] = heads['elec'].isnull()\nheads = heads.drop(columns=['noelec', 'coopele', 'public', 'planpri'])\n"
    },
    {
      "raw": "water = []\nfor i, row in heads.iterrows():\n    if row['abastaguano'] == 1:\n        water.append(0)\n    elif row['abastaguafuera'] == 1:\n        water.append(1)\n    elif row['abastaguadentro'] == 1:\n        water.append(2)\n    else:\n        water.append(np.nan)\n        \nheads['water'] = water\nheads['water-missing'] = heads['water'].isnull()\nheads = heads.drop(columns = ['abastaguano', 'abastaguafuera', 'abastaguadentro'])",
      "rewrite-ns": 3481774,
      "overhead-ns": 3481774,
      "exec-ns": 2011094045,
      "total-ns": 2014575819,
      "patts-hit": {},
      "rewritten": "water = []\nfor i, row in heads.iterrows():\n    if row['abastaguano'] == 1:\n        water.append(0)\n    elif row['abastaguafuera'] == 1:\n        water.append(1)\n    elif row['abastaguadentro'] == 1:\n        water.append(2)\n    else:\n        water.append(np.nan)\nheads['water'] = water\nheads['water-missing'] = heads['water'].isnull()\nheads = heads.drop(columns=['abastaguano', 'abastaguafuera', 'abastaguadentro']\n    )\n"
    },
    {
      "raw": "sanit = []\nfor i, row in heads.iterrows():\n    if row['sanitario1'] == 1:\n        sanit.append(0)\n    elif row['v14a'] == 0:\n        sanit.append(0)\n    elif row['sanitario2'] == 1:\n        sanit.append(3)\n    elif row['sanitario3'] == 1:\n        sanit.append(2)\n    elif row['sanitario5'] == 1:\n        sanit.append(1)\n    elif row['sanitario6'] == 1:\n        sanit.append(2)\n    else:\n        sanit.append(np.nan)\n        \nheads['sanit'] = sanit\nheads['sanit-missing'] = heads['sanit'].isnull()\nheads = heads.drop(columns = ['sanitario1', 'sanitario2', 'sanitario3', 'sanitario5', 'sanitario6', 'v14a'])",
      "rewrite-ns": 5311767,
      "overhead-ns": 5311767,
      "exec-ns": 2080008174,
      "total-ns": 2085319941,
      "patts-hit": {},
      "rewritten": "sanit = []\nfor i, row in heads.iterrows():\n    if row['sanitario1'] == 1:\n        sanit.append(0)\n    elif row['v14a'] == 0:\n        sanit.append(0)\n    elif row['sanitario2'] == 1:\n        sanit.append(3)\n    elif row['sanitario3'] == 1:\n        sanit.append(2)\n    elif row['sanitario5'] == 1:\n        sanit.append(1)\n    elif row['sanitario6'] == 1:\n        sanit.append(2)\n    else:\n        sanit.append(np.nan)\nheads['sanit'] = sanit\nheads['sanit-missing'] = heads['sanit'].isnull()\nheads = heads.drop(columns=['sanitario1', 'sanitario2', 'sanitario3',\n    'sanitario5', 'sanitario6', 'v14a'])\n"
    },
    {
      "raw": "cozinhar = []\nfor i, row in heads.iterrows():\n    if row['energcocinar1'] == 1:\n        cozinhar.append(0)\n    elif row['energcocinar2'] == 1:\n        cozinhar.append(2)\n    elif row['energcocinar3'] == 1:\n        cozinhar.append(2)\n    elif row['energcocinar4'] == 1:\n        cozinhar.append(1)\n    else:\n        cozinhar.append(np.nan)\n        \nheads['cozinhar'] = cozinhar\nheads['cozinhar-missing'] = heads['cozinhar'].isnull()\nheads = heads.drop(columns = ['energcocinar1', 'energcocinar2', 'energcocinar3', 'energcocinar4'])",
      "rewrite-ns": 3897757,
      "overhead-ns": 3897757,
      "exec-ns": 1928048312,
      "total-ns": 1931946069,
      "patts-hit": {},
      "rewritten": "cozinhar = []\nfor i, row in heads.iterrows():\n    if row['energcocinar1'] == 1:\n        cozinhar.append(0)\n    elif row['energcocinar2'] == 1:\n        cozinhar.append(2)\n    elif row['energcocinar3'] == 1:\n        cozinhar.append(2)\n    elif row['energcocinar4'] == 1:\n        cozinhar.append(1)\n    else:\n        cozinhar.append(np.nan)\nheads['cozinhar'] = cozinhar\nheads['cozinhar-missing'] = heads['cozinhar'].isnull()\nheads = heads.drop(columns=['energcocinar1', 'energcocinar2',\n    'energcocinar3', 'energcocinar4'])\n"
    },
    {
      "raw": "heads = heads.drop(columns = ['area2', 'elimbasu1', 'elimbasu2', 'elimbasu3', 'elimbasu4', 'elimbasu5', 'elimbasu6'])",
      "rewrite-ns": 729676,
      "overhead-ns": 729676,
      "exec-ns": 7002204,
      "total-ns": 7731880,
      "patts-hit": {},
      "rewritten": "heads = heads.drop(columns=['area2', 'elimbasu1', 'elimbasu2', 'elimbasu3',\n    'elimbasu4', 'elimbasu5', 'elimbasu6'])\n"
    },
    {
      "raw": "heads['walls'] = np.argmax(np.array(heads[['epared1', 'epared2', 'epared3']]), axis = 1)\nheads = heads.drop(columns = ['epared1', 'epared2', 'epared3'])\n\nheads['roof'] = np.argmax(np.array(heads[['etecho1', 'etecho2', 'etecho3']]), axis = 1)\nheads = heads.drop(columns = ['etecho1', 'etecho2', 'etecho3'])\n\nheads['floor'] = np.argmax(np.array(heads[['eviv1', 'eviv2', 'eviv3']]), axis = 1)\nheads = heads.drop(columns = ['eviv1', 'eviv2', 'eviv3'])\n",
      "rewrite-ns": 3842138,
      "overhead-ns": 3842138,
      "exec-ns": 44024681,
      "total-ns": 47866819,
      "patts-hit": {},
      "rewritten": "heads['walls'] = np.argmax(np.array(heads[['epared1', 'epared2', 'epared3']\n    ]), axis=1)\nheads = heads.drop(columns=['epared1', 'epared2', 'epared3'])\nheads['roof'] = np.argmax(np.array(heads[['etecho1', 'etecho2', 'etecho3']]\n    ), axis=1)\nheads = heads.drop(columns=['etecho1', 'etecho2', 'etecho3'])\nheads['floor'] = np.argmax(np.array(heads[['eviv1', 'eviv2', 'eviv3']]), axis=1\n    )\nheads = heads.drop(columns=['eviv1', 'eviv2', 'eviv3'])\n"
    },
    {
      "raw": "heads['walls+roof+floor'] = heads['walls'] + heads['roof'] + heads['floor']\ncounts = pd.DataFrame(heads.groupby(['walls+roof+floor'])['Target'].value_counts(normalize = True)).rename(columns = {'Target': 'Normalized Count'}).reset_index()\ncounts.head()",
      "rewrite-ns": 1971872,
      "overhead-ns": 1971872,
      "exec-ns": 12168318,
      "total-ns": 14140190,
      "patts-hit": {},
      "rewritten": "heads['walls+roof+floor'] = heads['walls'] + heads['roof'] + heads['floor']\ncounts = pd.DataFrame(heads.groupby(['walls+roof+floor'])['Target'].\n    value_counts(normalize=True)).rename(columns={'Target': 'Normalized Count'}\n    ).reset_index()\ncounts.head()\n"
    },
    {
      "raw": "heads['rooms-per-capita'] = heads['rooms'] / heads['tamviv']\nheads['rent-per-capita'] = heads['v2a1'] / heads['tamviv']\nheads['electronics-per-capita'] = (heads['v18q1'] + heads['qmobilephone']) / heads['tamviv']",
      "rewrite-ns": 1753069,
      "overhead-ns": 1753069,
      "exec-ns": 2106850,
      "total-ns": 3859919,
      "patts-hit": {},
      "rewritten": "heads['rooms-per-capita'] = heads['rooms'] / heads['tamviv']\nheads['rent-per-capita'] = heads['v2a1'] / heads['tamviv']\nheads['electronics-per-capita'] = (heads['v18q1'] + heads['qmobilephone']\n    ) / heads['tamviv']\n"
    },
    {
      "raw": "ind = data[id_ + ind_bool + ind_ordered]",
      "rewrite-ns": 527432,
      "overhead-ns": 527432,
      "exec-ns": 10510890,
      "total-ns": 11038322,
      "patts-hit": {},
      "rewritten": "ind = data[id_ + ind_bool + ind_ordered]\n"
    },
    {
      "raw": "ind[[c for c in ind if c.startswith('instl')]].head()",
      "rewrite-ns": 773954,
      "overhead-ns": 773954,
      "exec-ns": 8761800,
      "total-ns": 9535754,
      "patts-hit": {},
      "rewritten": "ind[[c for c in ind if c.startswith('instl')]].head()\n"
    },
    {
      "raw": "ind['inst'] = np.argmax(np.array(ind[[c for c in ind if c.startswith('instl')]]), axis = 1)",
      "rewrite-ns": 1185312,
      "overhead-ns": 1185312,
      "exec-ns": 9760192,
      "total-ns": 10945504,
      "patts-hit": {},
      "rewritten": "ind['inst'] = np.argmax(np.array(ind[[c for c in ind if c.startswith(\n    'instl')]]), axis=1)\n"
    },
    {
      "raw": "ind = ind.drop(columns = [c for c in ind if c.startswith('instlevel')])\nind['inst/age'] = ind['inst'] / ind['age']\nind['escolari/age'] = ind['escolari'] / ind['age']\nind['tech'] = ind['v18q'] + ind['mobilephone']\nind['tech'].describe()",
      "rewrite-ns": 2541306,
      "overhead-ns": 2541306,
      "exec-ns": 23854066,
      "total-ns": 26395372,
      "patts-hit": {},
      "rewritten": "ind = ind.drop(columns=[c for c in ind if c.startswith('instlevel')])\nind['inst/age'] = ind['inst'] / ind['age']\nind['escolari/age'] = ind['escolari'] / ind['age']\nind['tech'] = ind['v18q'] + ind['mobilephone']\nind['tech'].describe()\n"
    },
    {
      "raw": "def combine_features(data, cols=[], name=''):\n    df = data.copy()\n    for i, col in enumerate(cols):\n        print(i + 1, col)\n    df[cols] = df[cols].multiply([i for i in range(1, len(cols) + 1)], axis=1)\n    df[name] = df[cols].sum(axis=1)\n    df.drop(cols, axis=1, inplace=True)\n    return df",
      "rewrite-ns": 3287355,
      "overhead-ns": 3287355,
      "exec-ns": 755457,
      "total-ns": 4042812,
      "patts-hit": {},
      "rewritten": "def combine_features(data, cols=[], name=''):\n    df = data.copy()\n    for i, col in enumerate(cols):\n        print(i + 1, col)\n    df[cols] = df[cols].multiply([i for i in range(1, len(cols) + 1)], axis=1)\n    df[name] = df[cols].sum(axis=1)\n    df.drop(cols, axis=1, inplace=True)\n    return df\n"
    },
    {
      "raw": "heads = combine_features(heads, cols=[col for col in heads.columns if col.startswith('lugar')], name='region')\nprint('Region count by target.');\n# ALEX: remove plotting\n# sns.factorplot(\"region\", col=\"Target\", col_wrap=4, data=heads, kind=\"count\");",
      "rewrite-ns": 938105,
      "overhead-ns": 938105,
      "exec-ns": 42052228,
      "total-ns": 42990333,
      "patts-hit": {},
      "rewritten": "heads = combine_features(heads, cols=[col for col in heads.columns if col.\n    startswith('lugar')], name='region')\nprint('Region count by target.')\n"
    },
    {
      "raw": "heads = combine_features(heads, cols=[col for col in heads.columns if col.startswith('tipovivi')], name='home_own')\nprint('Home ownership type count by target.');\n# ALEX: remove plotting\n# sns.factorplot(\"home_own\", col=\"Target\", col_wrap=4, data=heads, kind=\"count\");",
      "rewrite-ns": 975088,
      "overhead-ns": 975088,
      "exec-ns": 36374500,
      "total-ns": 37349588,
      "patts-hit": {},
      "rewritten": "heads = combine_features(heads, cols=[col for col in heads.columns if col.\n    startswith('tipovivi')], name='home_own')\nprint('Home ownership type count by target.')\n"
    },
    {
      "raw": "heads = heads.drop(columns = ['paredblolad', 'paredzocalo', 'paredpreb', 'pareddes', 'paredmad', 'paredzinc', 'paredfibras',\n                             'paredother', 'pisomoscer', 'pisocemento', 'pisoother', 'pisonatur', 'pisomadera', 'techozinc',\n                             'techoentrepiso', 'techocane', 'techootro', 'hogar_nin', 'hogar_mayor', 'hogar_adul',\n                             'dependency', 'edjefe', 'edjefa', 'meaneduc', 'r4h1', 'r4h2', 'r4h3', 'r4m1',\n                             'r4m2', 'r4m3', 'r4t1', 'r4t2', 'walls', 'roof', 'floor', 'rooms', 'v2a1', 'qmobilephone',\n                             'v18q1', 'hacapo', 'cielorazo', 'bedrooms', 'pisonotiene', 'hacdor'])",
      "rewrite-ns": 2001611,
      "overhead-ns": 2001611,
      "exec-ns": 3789332,
      "total-ns": 5790943,
      "patts-hit": {},
      "rewritten": "heads = heads.drop(columns=['paredblolad', 'paredzocalo', 'paredpreb',\n    'pareddes', 'paredmad', 'paredzinc', 'paredfibras', 'paredother',\n    'pisomoscer', 'pisocemento', 'pisoother', 'pisonatur', 'pisomadera',\n    'techozinc', 'techoentrepiso', 'techocane', 'techootro', 'hogar_nin',\n    'hogar_mayor', 'hogar_adul', 'dependency', 'edjefe', 'edjefa',\n    'meaneduc', 'r4h1', 'r4h2', 'r4h3', 'r4m1', 'r4m2', 'r4m3', 'r4t1',\n    'r4t2', 'walls', 'roof', 'floor', 'rooms', 'v2a1', 'qmobilephone',\n    'v18q1', 'hacapo', 'cielorazo', 'bedrooms', 'pisonotiene', 'hacdor'])\n"
    },
    {
      "raw": "ind = ind.drop(columns = ['estadocivil1', 'estadocivil2', 'estadocivil3', 'estadocivil4', 'estadocivil5', 'estadocivil6',\n                              'estadocivil7', 'parentesco1', 'parentesco2',  'parentesco3', 'parentesco4', 'parentesco5', \n                              'parentesco6', 'parentesco7', 'parentesco8',  'parentesco9', 'parentesco10', 'parentesco11',\n                              'parentesco12', 'mobilephone', 'escolari', 'inst', 'age', 'v18q', 'male'])",
      "rewrite-ns": 1322667,
      "overhead-ns": 1322667,
      "exec-ns": 6603998,
      "total-ns": 7926665,
      "patts-hit": {},
      "rewritten": "ind = ind.drop(columns=['estadocivil1', 'estadocivil2', 'estadocivil3',\n    'estadocivil4', 'estadocivil5', 'estadocivil6', 'estadocivil7',\n    'parentesco1', 'parentesco2', 'parentesco3', 'parentesco4',\n    'parentesco5', 'parentesco6', 'parentesco7', 'parentesco8',\n    'parentesco9', 'parentesco10', 'parentesco11', 'parentesco12',\n    'mobilephone', 'escolari', 'inst', 'age', 'v18q', 'male'])\n"
    },
    {
      "raw": "final = heads.merge(ind, on = id_ , how = 'left')\nprint('Final features shape: ', final.shape)",
      "rewrite-ns": 825090,
      "overhead-ns": 825090,
      "exec-ns": 100133889,
      "total-ns": 100958979,
      "patts-hit": {},
      "rewritten": "final = heads.merge(ind, on=id_, how='left')\nprint('Final features shape: ', final.shape)\n"
    },
    {
      "raw": "print('\\n Missing Values')\nmissing = pd.DataFrame(final.isnull().sum()).rename(columns = {0: 'total'})\nmissing['percent'] = missing['total'] / len(final)\nmissing.sort_values('percent', ascending = False).head(10).drop('Target')",
      "rewrite-ns": 1792529,
      "overhead-ns": 1792529,
      "exec-ns": 72971019,
      "total-ns": 74763548,
      "patts-hit": {
        "SortHead": 1
      },
      "rewritten": "print('\\n Missing Values')\nmissing = pd.DataFrame(final.isnull().sum()).rename(columns={(0): 'total'})\nmissing['percent'] = missing['total'] / len(final)\ndias.rewriter.sort_head(called_on=missing, by='percent', n=10, asc=False,\n    orig=lambda _DIAS_x: _DIAS_x.sort_values('percent', ascending=False).\n    head(10)).drop('Target')\n"
    },
    {
      "raw": "final = final[final['elec-missing'] != True]\nfinal = final[final['rez_esc-missing'] != True]\nfinal = final[final['cozinhar-missing'] != True]\nfinal = final[final['water-missing'] != True]\nfinal = final[final['sanit-missing'] != True]\nfinal = final[final['v2a1-missing'] != True]",
      "rewrite-ns": 2577469,
      "overhead-ns": 2577469,
      "exec-ns": 171919329,
      "total-ns": 174496798,
      "patts-hit": {},
      "rewritten": "final = final[final['elec-missing'] != True]\nfinal = final[final['rez_esc-missing'] != True]\nfinal = final[final['cozinhar-missing'] != True]\nfinal = final[final['water-missing'] != True]\nfinal = final[final['sanit-missing'] != True]\nfinal = final[final['v2a1-missing'] != True]\n"
    },
    {
      "raw": "print('Final features shape: ', final.shape)",
      "rewrite-ns": 415460,
      "overhead-ns": 415460,
      "exec-ns": 324398,
      "total-ns": 739858,
      "patts-hit": {},
      "rewritten": "print('Final features shape: ', final.shape)\n"
    },
    {
      "raw": "final = final.drop(columns = ['sanit-missing', 'cozinhar-missing', 'water-missing', 'elec-missing', 'v2a1-missing',\n                              'rez_esc-missing'])",
      "rewrite-ns": 669803,
      "overhead-ns": 669803,
      "exec-ns": 13767879,
      "total-ns": 14437682,
      "patts-hit": {},
      "rewritten": "final = final.drop(columns=['sanit-missing', 'cozinhar-missing',\n    'water-missing', 'elec-missing', 'v2a1-missing', 'rez_esc-missing'])\n"
    },
    {
      "raw": "print('Final features shape: ', final.shape)",
      "rewrite-ns": 391399,
      "overhead-ns": 391399,
      "exec-ns": 300548,
      "total-ns": 691947,
      "patts-hit": {},
      "rewritten": "print('Final features shape: ', final.shape)\n"
    },
    {
      "raw": "train_labels = np.array(list(final[final['Target'].notnull()]['Target'].astype(np.uint8)))\n\nSPLIT = final[final['Target'].notnull()].drop(columns = ['Id', 'idhogar'])\nFINALtest = final[final['Target'].isnull()]\nsubmission_base = FINALtest[['Id', 'idhogar']].copy()\nFINALtest = FINALtest.drop(columns = ['Id', 'idhogar', 'Target' ])",
      "rewrite-ns": 3116848,
      "overhead-ns": 3116848,
      "exec-ns": 52799890,
      "total-ns": 55916738,
      "patts-hit": {},
      "rewritten": "train_labels = np.array(list(final[final['Target'].notnull()]['Target'].\n    astype(np.uint8)))\nSPLIT = final[final['Target'].notnull()].drop(columns=['Id', 'idhogar'])\nFINALtest = final[final['Target'].isnull()]\nsubmission_base = FINALtest[['Id', 'idhogar']].copy()\nFINALtest = FINALtest.drop(columns=['Id', 'idhogar', 'Target'])\n"
    },
    {
      "raw": "# ALEX: remove ML code\n# train, test = train_test_split(SPLIT, test_size=0.2)",
      "rewrite-ns": 21198,
      "overhead-ns": 21198,
      "exec-ns": 107541,
      "total-ns": 128739,
      "patts-hit": {},
      "rewritten": ""
    },
    {
      "raw": "neighbors = [3,5,7,9,11,13,15,17,19,21,23,25,27,29,31,33,35]\nXtrain = train\nYtrain = train.Target\nXtest = test\nYtest = test.Target",
      "rewrite-ns": 1505933,
      "overhead-ns": 1505933,
      "exec-ns": 600842,
      "total-ns": 2106775,
      "patts-hit": {},
      "rewritten": "neighbors = [3, 5, 7, 9, 11, 13, 15, 17, 19, 21, 23, 25, 27, 29, 31, 33, 35]\nXtrain = train\nYtrain = train.Target\nXtest = test\nYtest = test.Target\n"
    },
    {
      "raw": "# ALEX: remove ML code\n# print('With CV = 3:')\n# cv_scores = []\n\n# for k in neighbors:\n#     knn = KNeighborsClassifier(n_neighbors=k)\n#     scores = cross_val_score(knn, Xtrain, Ytrain, cv=3, scoring='accuracy')\n#     cv_scores.append(scores.mean())\n    \n    \n# MSE = [1 - x for x in cv_scores]\n# optimal_k = neighbors[MSE.index(min(MSE))]\n# print(\"The optimal number of neighbors is %d\" % optimal_k)",
      "rewrite-ns": 14154,
      "overhead-ns": 14154,
      "exec-ns": 71013,
      "total-ns": 85167,
      "patts-hit": {},
      "rewritten": ""
    },
    {
      "raw": "# ALEX: remove plotting\n# plt.plot(neighbors, MSE)\n# plt.xlabel('Number of Neighbors K')\n# plt.ylabel('Misclassification Error')\n# plt.show()",
      "rewrite-ns": 11321,
      "overhead-ns": 11321,
      "exec-ns": 61804,
      "total-ns": 73125,
      "patts-hit": {},
      "rewritten": ""
    },
    {
      "raw": "# ALEX: remove ML code\n# print('With CV = 5:')\n# cv_scores = []\n\n# for k in neighbors:\n#     knn = KNeighborsClassifier(n_neighbors=k)\n#     scores = cross_val_score(knn, Xtrain, Ytrain, cv=5, scoring='accuracy')\n#     cv_scores.append(scores.mean())\n    \n    \n# MSE = [1 - x for x in cv_scores]\n# optimal_k = neighbors[MSE.index(min(MSE))]\n# print(\"The optimal number of neighbors is %d\" % optimal_k)",
      "rewrite-ns": 11409,
      "overhead-ns": 11409,
      "exec-ns": 54310,
      "total-ns": 65719,
      "patts-hit": {},
      "rewritten": ""
    },
    {
      "raw": "# ALEX: remove plotting\n# plt.plot(neighbors, MSE)\n# plt.xlabel('Number of Neighbors K')\n# plt.ylabel('Misclassification Error')\n# plt.show()",
      "rewrite-ns": 10181,
      "overhead-ns": 10181,
      "exec-ns": 52006,
      "total-ns": 62187,
      "patts-hit": {},
      "rewritten": ""
    },
    {
      "raw": "# ALEX: remove ML code\n# print('With CV = 10:')\n# cv_scores = []\n\n# for k in neighbors:\n#     knn = KNeighborsClassifier(n_neighbors=k)\n#     scores = cross_val_score(knn, Xtrain, Ytrain, cv=10, scoring='accuracy')\n#     cv_scores.append(scores.mean())\n    \n    \n# MSE = [1 - x for x in cv_scores]\n# optimal_k = neighbors[MSE.index(min(MSE))]\n# print(\"The optimal number of neighbors is %d\" % optimal_k)",
      "rewrite-ns": 11544,
      "overhead-ns": 11544,
      "exec-ns": 51543,
      "total-ns": 63087,
      "patts-hit": {},
      "rewritten": ""
    },
    {
      "raw": "# ALEX: remove plotting\n# plt.plot(neighbors, MSE)\n# plt.xlabel('Number of Neighbors K')\n# plt.ylabel('Misclassification Error')\n# plt.show()",
      "rewrite-ns": 10040,
      "overhead-ns": 10040,
      "exec-ns": 50802,
      "total-ns": 60842,
      "patts-hit": {},
      "rewritten": ""
    },
    {
      "raw": "# ALEX: remove ML code\n# print('With CV = 15:')\n# cv_scores = []\n\n# for k in neighbors:\n#     knn = KNeighborsClassifier(n_neighbors=k)\n#     scores = cross_val_score(knn, Xtrain, Ytrain, cv=15, scoring='accuracy')\n#     cv_scores.append(scores.mean())\n    \n    \n# MSE = [1 - x for x in cv_scores]\n# optimal_k = neighbors[MSE.index(min(MSE))]\n# print(\"The optimal number of neighbors is %d\" % optimal_k)",
      "rewrite-ns": 11417,
      "overhead-ns": 11417,
      "exec-ns": 50499,
      "total-ns": 61916,
      "patts-hit": {},
      "rewritten": ""
    },
    {
      "raw": "# ALEX: remove plotting\n# plt.plot(neighbors, MSE)\n# plt.xlabel('Number of Neighbors K')\n# plt.ylabel('Misclassification Error')\n# plt.show()",
      "rewrite-ns": 9460,
      "overhead-ns": 9460,
      "exec-ns": 50652,
      "total-ns": 60112,
      "patts-hit": {},
      "rewritten": ""
    },
    {
      "raw": "# ALEX: remove ML code\n# print('With CV = 20:')\n# cv_scores = []\n\n# for k in neighbors:\n#     knn = KNeighborsClassifier(n_neighbors=k)\n#     scores = cross_val_score(knn, Xtrain, Ytrain, cv=20, scoring='accuracy')\n#     cv_scores.append(scores.mean())\n    \n    \n# MSE = [1 - x for x in cv_scores]\n# optimal_k = neighbors[MSE.index(min(MSE))]\n# print(\"The optimal number of neighbors is %d\" % optimal_k)",
      "rewrite-ns": 11295,
      "overhead-ns": 11295,
      "exec-ns": 50525,
      "total-ns": 61820,
      "patts-hit": {},
      "rewritten": ""
    },
    {
      "raw": "# ALEX: remove plotting\n# plt.plot(neighbors, MSE)\n# plt.xlabel('Number of Neighbors K')\n# plt.ylabel('Misclassification Error')\n# plt.show()",
      "rewrite-ns": 10163,
      "overhead-ns": 10163,
      "exec-ns": 50195,
      "total-ns": 60358,
      "patts-hit": {},
      "rewritten": ""
    },
    {
      "raw": "# ALEX: remove ML code\n# knn = KNeighborsClassifier(n_neighbors=7)",
      "rewrite-ns": 9363,
      "overhead-ns": 9363,
      "exec-ns": 49800,
      "total-ns": 59163,
      "patts-hit": {},
      "rewritten": ""
    },
    {
      "raw": "# ALEX: remove ML code\n# knn.fit(Xtrain,Ytrain)",
      "rewrite-ns": 9029,
      "overhead-ns": 9029,
      "exec-ns": 49765,
      "total-ns": 58794,
      "patts-hit": {},
      "rewritten": ""
    },
    {
      "raw": "# ALEX: remove ML code\n# scores = cross_val_score(knn, Xtrain, Ytrain, cv=10)\n# scores",
      "rewrite-ns": 9145,
      "overhead-ns": 9145,
      "exec-ns": 50093,
      "total-ns": 59238,
      "patts-hit": {},
      "rewritten": ""
    },
    {
      "raw": "# ALEX: remove ML code\n# YtestPred = knn.predict(Xtest)",
      "rewrite-ns": 9497,
      "overhead-ns": 9497,
      "exec-ns": 50628,
      "total-ns": 60125,
      "patts-hit": {},
      "rewritten": ""
    },
    {
      "raw": "# ALEX: remove ML code\n# from sklearn.metrics import accuracy_score\n# accuracy_score(Ytest,YtestPred)",
      "rewrite-ns": 9484,
      "overhead-ns": 9484,
      "exec-ns": 50171,
      "total-ns": 59655,
      "patts-hit": {},
      "rewritten": ""
    },
    {
      "raw": "FINALtest.insert(0,'Target',0.0)",
      "rewrite-ns": 419371,
      "overhead-ns": 419371,
      "exec-ns": 745581,
      "total-ns": 1164952,
      "patts-hit": {},
      "rewritten": "FINALtest.insert(0, 'Target', 0.0)\n"
    },
    {
      "raw": "FINALtest.dtypes",
      "rewrite-ns": 56996,
      "overhead-ns": 56996,
      "exec-ns": 1184487,
      "total-ns": 1241483,
      "patts-hit": {},
      "rewritten": "FINALtest.dtypes\n"
    },
    {
      "raw": "XFINALtest = FINALtest\n# ALEX: remove ML code\n# YFINALtestPred = knn.predict(XFINALtest)",
      "rewrite-ns": 202189,
      "overhead-ns": 202189,
      "exec-ns": 178363,
      "total-ns": 380552,
      "patts-hit": {},
      "rewritten": "XFINALtest = FINALtest\n"
    },
    {
      "raw": "# ALEX: remove ML code\n# YFINALtestPred",
      "rewrite-ns": 11243,
      "overhead-ns": 11243,
      "exec-ns": 61729,
      "total-ns": 72972,
      "patts-hit": {},
      "rewritten": ""
    },
    {
      "raw": "pred = pd.DataFrame(submission_base)\n# ALEX: remove ML code\n# pred[\"Target\"] = YFINALtestPred",
      "rewrite-ns": 358544,
      "overhead-ns": 358544,
      "exec-ns": 203967,
      "total-ns": 562511,
      "patts-hit": {},
      "rewritten": "pred = pd.DataFrame(submission_base)\n"
    },
    {
      "raw": "pred.to_csv(\"prediction.csv\", index=False)",
      "rewrite-ns": 377739,
      "overhead-ns": 377739,
      "exec-ns": 229903193,
      "total-ns": 230280932,
      "patts-hit": {},
      "rewritten": "pred.to_csv('prediction.csv', index=False)\n"
    },
    {
      "raw": "",
      "rewrite-ns": 14716,
      "overhead-ns": 14716,
      "exec-ns": 77485,
      "total-ns": 92201,
      "patts-hit": {},
      "rewritten": ""
    }
  ],
  "total-time-in-sec": 11.586506115,
  "max-disk-in-mb": 0
}