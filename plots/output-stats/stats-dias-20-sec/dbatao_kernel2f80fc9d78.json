{
  "max-mem-in-mb": 1287,
  "max-mem-in-mb2": 1872,
  "cells": [
    {
      "raw": "# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle/python Docker image: https://github.com/kaggle/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\n# import pandas as pd # data processing, CSV file I/O (e.g. pd.read_csv)\nexec(os.environ['IREWR_IMPORTS'])\n\n# Input data files are available in the read-only \"../input/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\n# ALEX: remove path printing\n# import os\n# for dirname, _, filenames in os.walk('/kaggle/input'):\n#     for filename in filenames:\n#         print(os.path.join(dirname, filename))\n\n# You can write up to 5GB to the current directory (/kaggle/working/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to /kaggle/temp/, but they won't be saved outside of the current session",
      "rewrite-ns": 504506,
      "overhead-ns": 504506,
      "exec-ns": 271084,
      "total-ns": 775590,
      "patts-hit": {},
      "rewritten": "import numpy as np\nexec(os.environ['IREWR_IMPORTS'])\n"
    },
    {
      "raw": "# import numpy as np\n# import pandas as pd\n# ALEX: remove plotting, ML code\n# from matplotlib import pyplot as plt\n# import seaborn as sns\n# from sklearn.preprocessing import PowerTransformer",
      "rewrite-ns": 12342,
      "overhead-ns": 12342,
      "exec-ns": 67462,
      "total-ns": 79804,
      "patts-hit": {},
      "rewritten": ""
    },
    {
      "raw": "#\u30c7\u30fc\u30bf\u306e\u8aad\u307f\u8fbc\u307f\n\ntrain = pd.read_csv('./input/train.scaled.csv') #\u8a13\u7df4\u30c7\u30fc\u30bf\ntest_x = pd.read_csv('./input/test.scaled.csv') #\u30c6\u30b9\u30c8\u30c7\u30fc\u30bf\n\n#\u5b66\u7fd2\u30c7\u30fc\u30bf\u306e\u5909\u6570\u3092\u78ba\u8a8d\ntrain.columns",
      "rewrite-ns": 667304,
      "overhead-ns": 667304,
      "exec-ns": 2486860788,
      "total-ns": 2487528092,
      "patts-hit": {},
      "rewritten": "train = pd.read_csv('./input/train.scaled.csv')\ntest_x = pd.read_csv('./input/test.scaled.csv')\ntrain.columns\n"
    },
    {
      "raw": "#\u76ee\u7684\u5909\u6570\u3067\u3042\u308b\u5bb6\u306e\u4fa1\u683c\u306e\u8981\u7d04\u7d71\u8a08\u91cf\u3092\u8868\u793a\u3059\u308b\ntrain[\"SalePrice\"].describe()",
      "rewrite-ns": 507545,
      "overhead-ns": 507545,
      "exec-ns": 9399079,
      "total-ns": 9906624,
      "patts-hit": {},
      "rewritten": "train['SalePrice'].describe()\n"
    },
    {
      "raw": "#50\u30d1\u30fc\u30bb\u30f3\u30c8\u30bf\u30a4\u30eb\u304c16\u4e07\u306a\u306e\u306b\u5bfe\u3057\u3066\u5e73\u5747\u304c18\u4e07\u3068\u306a\u3063\u3066\u3044\u308b\u3001\u304b\u3064MAX\u304c75\u4e07\u3068\u5927\u304d\u3044\u306e\u3067\u6b63\u898f\u5206\u5e03\u306b\u306f\u306a\u3063\u3066\u306a\u3044\u6c17\u304c\u3057\u307e\u3059\u3002\u30d2\u30b9\u30c8\u30b0\u30e9\u30e0\u3092\u898b\u3066\u307f\u307e\u3059\u3002",
      "rewrite-ns": 19393,
      "overhead-ns": 19393,
      "exec-ns": 83178,
      "total-ns": 102571,
      "patts-hit": {},
      "rewritten": ""
    },
    {
      "raw": "#\u76ee\u7684\u5909\u6570\u3067\u3042\u308b\u5bb6\u306e\u4fa1\u683c\u306e\u30d2\u30b9\u30c8\u30b0\u30e9\u30e0\u3092\u8868\u793a\u3059\u308b\n# ALEX: remove plotting\n# plt.figure(figsize=(20, 10))\n# sns.distplot(train['SalePrice'])\n_ = train['SalePrice']",
      "rewrite-ns": 329193,
      "overhead-ns": 329193,
      "exec-ns": 242258,
      "total-ns": 571451,
      "patts-hit": {},
      "rewritten": "_ = train['SalePrice']\n"
    },
    {
      "raw": "#\u3084\u306f\u308a\u6b63\u898f\u5206\u5e03\u306b\u306a\u3063\u3066\u3044\u307e\u305b\u3093\u306d\u3002\u76ee\u7684\u5909\u6570\u306e\u5206\u5e03\u306f\u6b63\u898f\u5206\u5e03\u306b\u306a\u3063\u3066\u3044\u306a\u3044\u3068\u30e2\u30c7\u30eb\u306e\u4e88\u6e2c\u7cbe\u5ea6\u306b\u5f71\u97ff\u304c\u51fa\u3066\u3057\u307e\u3046\u306e\u3067\u3001\u3053\u308c\u306f\u3042\u3068\u3067\u5bfe\u6570\u5909\u63db\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u305d\u3046\u3067\u3059\u3002",
      "rewrite-ns": 12799,
      "overhead-ns": 12799,
      "exec-ns": 62906,
      "total-ns": 75705,
      "patts-hit": {},
      "rewritten": ""
    },
    {
      "raw": "#\u6b6a\u5ea6\u3068\u5c16\u5ea6\u3092\u8a08\u7b97\nprint(\"\u6b6a\u5ea6: %f\" % train['SalePrice'].skew())\nprint(\"\u5c16\u5ea6: %f\" % train['SalePrice'].kurt())",
      "rewrite-ns": 1066732,
      "overhead-ns": 1066732,
      "exec-ns": 2845717,
      "total-ns": 3912449,
      "patts-hit": {},
      "rewritten": "print('\u6b6a\u5ea6: %f' % train['SalePrice'].skew())\nprint('\u5c16\u5ea6: %f' % train['SalePrice'].kurt())\n"
    },
    {
      "raw": "#\u6b6a\u5ea6\u304c\u6b63\u306e\u5024\u306a\u306e\u3067\u3001\u53f3\u88fe\u304c\u9577\u3044\uff08\u2252\u5de6\u306b\u504f\u3063\u3066\u3044\u308b\uff09\u5206\u5e03\u3067\u3042\u308b\u3053\u3068\u3001\u3055\u3089\u306b\u5c16\u5ea6\u304c\u6b63\u306e\u5024\u306e\u305f\u3081\u6b63\u898f\u5206\u5e03\u3088\u308a\u3082\u3060\u3044\u3076\u5c16\u3063\u305f\uff08\u5e73\u5747\u4ed8\u8fd1\u306b\u30c7\u30fc\u30bf\u304c\u96c6\u4e2d\u3057\u3066\u3044\u308b\uff09\u5206\u5e03\u3067\u3042\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002",
      "rewrite-ns": 14673,
      "overhead-ns": 14673,
      "exec-ns": 71261,
      "total-ns": 85934,
      "patts-hit": {},
      "rewritten": ""
    },
    {
      "raw": "#\u3053\u3053\u3067\u4e0e\u3048\u3089\u308c\u305f\u7279\u5fb4\u91cf\u3092\u307f\u308b\u3068\n\n#\u7269\u4ef6\u306e\u5927\u304d\u3055\uff08\u5e83\u3055\uff09\n#\u7bc9\u5e74\u6570\n#\u5bb6\u306e\u6750\u8cea\u3068\u5b8c\u6210\u5ea6\n#\u3042\u305f\u308a\u304c\u3071\u3063\u3068\u307f\u3067\u7269\u4ef6\u306e\u4fa1\u683c\u306b\u5f71\u97ff\u3057\u305d\u3046\u306a\u306e\u3067\u3001\u76ee\u7684\u5909\u6570\u3068\u306e\u95a2\u4fc2\u3092\u898b\u3066\u307f\u307e\u3059\u3002",
      "rewrite-ns": 13111,
      "overhead-ns": 13111,
      "exec-ns": 63930,
      "total-ns": 77041,
      "patts-hit": {},
      "rewritten": ""
    },
    {
      "raw": "#\u7269\u4ef6\u306e\u5e83\u3055\u3092\u5408\u8a08\u3057\u305f\u5909\u6570\u3092\u4f5c\u6210\ntrain[\"TotalSF\"] = train[\"1stFlrSF\"] + train[\"2ndFlrSF\"] + train[\"TotalBsmtSF\"]\ntest_x[\"TotalSF\"] = test_x[\"1stFlrSF\"] + test_x[\"2ndFlrSF\"] + test_x[\"TotalBsmtSF\"]\n\n#\u7269\u4ef6\u306e\u5e83\u3055\u3068\u7269\u4ef6\u4fa1\u683c\u306e\u6563\u5e03\u56f3\u3092\u4f5c\u6210\n# ALEX: remove plotting\n# plt.figure(figsize=(20, 10))\n# plt.scatter(train[\"TotalSF\"],train[\"SalePrice\"])\n# plt.xlabel(\"TotalSF\")\n# plt.ylabel(\"SalePrice\")\n_ = train[\"TotalSF\"]\n_ = train[\"SalePrice\"]",
      "rewrite-ns": 2044857,
      "overhead-ns": 2044857,
      "exec-ns": 3444932,
      "total-ns": 5489789,
      "patts-hit": {},
      "rewritten": "train['TotalSF'] = train['1stFlrSF'] + train['2ndFlrSF'] + train['TotalBsmtSF']\ntest_x['TotalSF'] = test_x['1stFlrSF'] + test_x['2ndFlrSF'] + test_x[\n    'TotalBsmtSF']\n_ = train['TotalSF']\n_ = train['SalePrice']\n"
    },
    {
      "raw": "#\u82e5\u5e72\u5916\u308c\u5024\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u76f8\u95a2\u3057\u3066\u3044\u308b\u3088\u3046\u306b\u898b\u3048\u307e\u3059\u3002\u3084\u306f\u308a\u7269\u4ef6\u304c\u5927\u304d\u304f\u306a\u308b\u307b\u3069\u7269\u4ef6\u4fa1\u683c\u3082\u9ad8\u304f\u306a\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002",
      "rewrite-ns": 14542,
      "overhead-ns": 14542,
      "exec-ns": 70366,
      "total-ns": 84908,
      "patts-hit": {},
      "rewritten": ""
    },
    {
      "raw": "#\u5916\u308c\u5024\u3092\u9664\u5916\u3059\u308b\ntrain = train.drop(train[(train['TotalSF']>7500) & (train['SalePrice']<300000)].index)\n\n#\u7269\u4ef6\u306e\u5e83\u3055\u3068\u7269\u4ef6\u4fa1\u683c\u306e\u6563\u5e03\u56f3\u3092\u4f5c\u6210\n# ALEX: remove plotting\n# plt.figure(figsize=(20, 10))\n# plt.scatter(train[\"TotalSF\"],train[\"SalePrice\"])\n# plt.xlabel(\"TotalSF\")\n# plt.ylabel(\"SalePrice\")\n_ = train[\"TotalSF\"]\n_ = train[\"SalePrice\"]",
      "rewrite-ns": 1580640,
      "overhead-ns": 1580640,
      "exec-ns": 129262548,
      "total-ns": 130843188,
      "patts-hit": {},
      "rewritten": "train = train.drop(train[(train['TotalSF'] > 7500) & (train['SalePrice'] < \n    300000)].index)\n_ = train['TotalSF']\n_ = train['SalePrice']\n"
    },
    {
      "raw": "#\u7bc9\u5e74\u6570\u3068\u7269\u4ef6\u4fa1\u683c\u306e\u6563\u5e03\u56f3\u3092\u4f5c\u6210\n#plt.scatter(train[\"YearBuilt\"],train[\"SalePrice\"],color = \"#e41a1c\")\n#plt.xlabel(\"YearBuilt\")\n#plt.ylabel(\"SalePrice\")\n\ndata = pd.concat([train[\"YearBuilt\"],train[\"SalePrice\"]],axis=1)\n\n# ALEX: remove plotting\n# plt.figure(figsize=(20, 10))\n# plt.xticks(rotation='90')\n# sns.boxplot(x=\"YearBuilt\",y=\"SalePrice\",data=data)",
      "rewrite-ns": 816348,
      "overhead-ns": 816348,
      "exec-ns": 2012996,
      "total-ns": 2829344,
      "patts-hit": {},
      "rewritten": "data = pd.concat([train['YearBuilt'], train['SalePrice']], axis=1)\n"
    },
    {
      "raw": "#\u5fae\u5999\u3067\u3059\u304c\u7bc9\u5e74\u6570\u304c\u65b0\u3057\u3044\u307b\u3069\u7269\u4ef6\u4fa1\u683c\u304c\u9ad8\u304f\u306a\u308b\u50be\u5411\u306f\u3042\u308a\u305d\u3046\u3067\u3059\u3002\n#\u3053\u3061\u3089\u3082\u5916\u308c\u5024\u304c\u3042\u308b\u306e\u3067\u9664\u5916\u3057\u307e\u3059\u3002",
      "rewrite-ns": 19141,
      "overhead-ns": 19141,
      "exec-ns": 82427,
      "total-ns": 101568,
      "patts-hit": {},
      "rewritten": ""
    },
    {
      "raw": "#\u5916\u308c\u5024\u3092\u9664\u5916\u3059\u308b\ntrain = train.drop(train[(train['YearBuilt']<2000) & (train['SalePrice']>600000)].index)\n\n#\u30b0\u30e9\u30d5\u3092\u63cf\u753b\u3059\u308b\ndata = pd.concat([train[\"YearBuilt\"],train[\"SalePrice\"]],axis=1)\n\n# ALEX: remove plotting\n# plt.figure(figsize=(20, 10))\n# plt.xticks(rotation='90')\n# sns.boxplot(x=\"YearBuilt\",y=\"SalePrice\",data=data)",
      "rewrite-ns": 1745730,
      "overhead-ns": 1745730,
      "exec-ns": 109649085,
      "total-ns": 111394815,
      "patts-hit": {},
      "rewritten": "train = train.drop(train[(train['YearBuilt'] < 2000) & (train['SalePrice'] >\n    600000)].index)\ndata = pd.concat([train['YearBuilt'], train['SalePrice']], axis=1)\n"
    },
    {
      "raw": "#\u3055\u3089\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u7279\u5fb4\u91cf\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u308c\u3092\u5bb6\u306e\u6750\u8cea\u3068\u5b8c\u6210\u5ea6\u3068\u8a33\u3059\u306e\u304c\u3088\u3044\u306e\u304b\u308f\u304b\u308a\u307e\u305b\u3093\u304c\u4fa1\u683c\u306b\u306f\u5f71\u97ff\u4e0e\u3048\u305d\u3046\u306a\u306e\u3067\u53ef\u8996\u5316\u3057\u3066\u307f\u307e\u3059\u3002",
      "rewrite-ns": 23336,
      "overhead-ns": 23336,
      "exec-ns": 104192,
      "total-ns": 127528,
      "patts-hit": {},
      "rewritten": ""
    },
    {
      "raw": "#\u5bb6\u306e\u6750\u8cea\u30fb\u5b8c\u6210\u5ea6\u3068\u7269\u4ef6\u4fa1\u683c\u306e\u6563\u5e03\u56f3\u3092\u4f5c\u6210\n# ALEX: remove plotting\n# plt.figure(figsize=(20, 10))\n# plt.scatter(train[\"OverallQual\"],train[\"SalePrice\"])\n# plt.xlabel(\"OverallQual\")\n# plt.ylabel(\"SalePrice\")\n_ = train[\"OverallQual\"]\n_ = train[\"SalePrice\"]",
      "rewrite-ns": 589330,
      "overhead-ns": 589330,
      "exec-ns": 346058,
      "total-ns": 935388,
      "patts-hit": {},
      "rewritten": "_ = train['OverallQual']\n_ = train['SalePrice']\n"
    },
    {
      "raw": "#\u30af\u30aa\u30ea\u30c6\u30a3\u304c\u4e0a\u304c\u308b\u307b\u3069\u4fa1\u683c\u304c\u4e0a\u304c\u3063\u3066\u3044\u308b\u3088\u3046\u306b\u898b\u3048\u307e\u3059\u3002",
      "rewrite-ns": 13797,
      "overhead-ns": 13797,
      "exec-ns": 75378,
      "total-ns": 89175,
      "patts-hit": {},
      "rewritten": ""
    },
    {
      "raw": "#\u5916\u308c\u5024\u3092\u9664\u5916\u3059\u308b\ntrain = train.drop(train[(train['OverallQual']<5) & (train['SalePrice']>200000)].index)\ntrain = train.drop(train[(train['OverallQual']<10) & (train['SalePrice']>500000)].index)\n\n#\u30b0\u30e9\u30d5\u3092\u63cf\u753b\u3059\u308b\n# ALEX: remove plotting\n# plt.figure(figsize=(20, 10))\n# plt.scatter(train[\"OverallQual\"],train[\"SalePrice\"])\n# plt.xlabel(\"OverallQual\")\n# plt.ylabel(\"SalePrice\")\n_ = train[\"OverallQual\"]\n_ = train[\"SalePrice\"]",
      "rewrite-ns": 3255258,
      "overhead-ns": 3255258,
      "exec-ns": 205167617,
      "total-ns": 208422875,
      "patts-hit": {},
      "rewritten": "train = train.drop(train[(train['OverallQual'] < 5) & (train['SalePrice'] >\n    200000)].index)\ntrain = train.drop(train[(train['OverallQual'] < 10) & (train['SalePrice'] >\n    500000)].index)\n_ = train['OverallQual']\n_ = train['SalePrice']\n"
    },
    {
      "raw": "#\u524d\u51e6\u7406\u3092\u3044\u3063\u307a\u3093\u306b\u884c\u3046\u305f\u3081\u306b\u3001\u5b66\u7fd2\u30c7\u30fc\u30bf\u3068\u30c6\u30b9\u30c8\u30c7\u30fc\u30bf\u3092\u30de\u30fc\u30b8\u3057\u307e\u3059\u3002 \u3055\u3089\u306b\u5b66\u7fd2\u30c7\u30fc\u30bf\u306b\u95a2\u3057\u3066\u306f\u76ee\u7684\u5909\u6570\u3067\u3042\u308b\u300cSalesPrice\u300d\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u306e\u3067\u3053\u3061\u3089\u306f\u5207\u308a\u51fa\u3057\u3066\u304a\u304d\u307e\u3059\u3002",
      "rewrite-ns": 26320,
      "overhead-ns": 26320,
      "exec-ns": 107905,
      "total-ns": 134225,
      "patts-hit": {},
      "rewritten": ""
    },
    {
      "raw": "#\u5b66\u7fd2\u30c7\u30fc\u30bf\u3092\u76ee\u7684\u5909\u6570\u3068\u305d\u308c\u4ee5\u5916\u306b\u5206\u3051\u308b\ntrain_x = train.drop(\"SalePrice\",axis=1)\ntrain_y = train[\"SalePrice\"]\n\n#\u5b66\u7fd2\u30c7\u30fc\u30bf\u3068\u30c6\u30b9\u30c8\u30c7\u30fc\u30bf\u3092\u7d71\u5408\nall_data = pd.concat([train_x,test_x],axis=0,sort=True)\n\n#ID\u306e\u30ab\u30e9\u30e0\u306f\u4e0d\u5fc5\u8981\u306a\u306e\u3067\u5225\u306e\u5909\u6570\u306b\u683c\u7d0d\ntrain_ID = train['Id']\ntest_ID = test_x['Id']\n\nall_data.drop(\"Id\", axis = 1, inplace = True)\n\n#\u305d\u308c\u305e\u308c\u306e\u30c7\u30fc\u30bf\u306e\u30b5\u30a4\u30ba\u3092\u78ba\u8a8d\nprint(\"train_x: \"+str(train_x.shape))\nprint(\"train_y: \"+str(train_y.shape))\nprint(\"test_x: \"+str(test_x.shape))\nprint(\"all_data: \"+str(all_data.shape))",
      "rewrite-ns": 3743359,
      "overhead-ns": 3743359,
      "exec-ns": 462318357,
      "total-ns": 466061716,
      "patts-hit": {},
      "rewritten": "train_x = train.drop('SalePrice', axis=1)\ntrain_y = train['SalePrice']\nall_data = pd.concat([train_x, test_x], axis=0, sort=True)\ntrain_ID = train['Id']\ntest_ID = test_x['Id']\nall_data.drop('Id', axis=1, inplace=True)\nprint('train_x: ' + str(train_x.shape))\nprint('train_y: ' + str(train_y.shape))\nprint('test_x: ' + str(test_x.shape))\nprint('all_data: ' + str(all_data.shape))\n"
    },
    {
      "raw": "#\u7d9a\u3044\u3066\u6b20\u640d\u5024\u3092\u51e6\u7406\u3057\u3066\u3044\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\u307e\u305a\u306f\u3069\u306e\u304f\u3089\u3044\u6b20\u640d\u5024\u304c\u3042\u308b\u306e\u304b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002",
      "rewrite-ns": 27367,
      "overhead-ns": 27367,
      "exec-ns": 115145,
      "total-ns": 142512,
      "patts-hit": {},
      "rewritten": ""
    },
    {
      "raw": "#\u30c7\u30fc\u30bf\u306e\u6b20\u640d\u5024\u3092\u78ba\u8a8d\u3059\u308b\nall_data_na = all_data.isnull().sum()[all_data.isnull().sum()>0].sort_values(ascending=False)\nall_data_na",
      "rewrite-ns": 1112934,
      "overhead-ns": 1112934,
      "exec-ns": 3590185952,
      "total-ns": 3591298886,
      "patts-hit": {},
      "rewritten": "all_data_na = all_data.isnull().sum()[all_data.isnull().sum() > 0].sort_values(\n    ascending=False)\nall_data_na\n"
    },
    {
      "raw": "#\u3081\u3061\u3083\u304f\u3061\u3083\u3042\u308a\u307e\u3059\u306d\u3001\u3001\u3001\u30b0\u30e9\u30d5\u5316\u3057\u3066\u307f\u307e\u3059\u3002",
      "rewrite-ns": 21971,
      "overhead-ns": 21971,
      "exec-ns": 102927,
      "total-ns": 124898,
      "patts-hit": {},
      "rewritten": ""
    },
    {
      "raw": "#\u6b20\u640d\u5024\u306e\u6570\u3092\u30b0\u30e9\u30d5\u5316\n# ALEX: remove plotting\n# plt.figure(figsize=(20,10))\n# plt.xticks(rotation='90')\n# sns.barplot(x=all_data_na.index, y=all_data_na)\n_ = all_data_na.index",
      "rewrite-ns": 297293,
      "overhead-ns": 297293,
      "exec-ns": 273573,
      "total-ns": 570866,
      "patts-hit": {},
      "rewritten": "_ = all_data_na.index\n"
    },
    {
      "raw": "#\u6b20\u640d\u5024\u306b\u3064\u3044\u3066\u306f\u4e00\u62ec\u3067\u524a\u9664\u3059\u308b\u304b\u3001\u5e73\u5747\u5024\u3067\u7f6e\u63db\u3057\u3066\u3057\u307e\u3044\u305f\u304f\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u304c\u3001\n#\u304d\u3061\u3093\u3068\u6b20\u640d\u5024\u304c\u591a\u3044\u5909\u6570\u304c\u4f55\u3092\u8868\u3059\u3082\u306e\u304b\u898b\u3066\u307f\u307e\u3059\u3002\n\n#PoolQC: Pool quality\n#\u5099\u3048\u4ed8\u3051\u3089\u308c\u3066\u3044\u308b\u30d7\u30fc\u30eb\u306e\u8cea\u3092\u8868\u3059\u3002\u30d7\u30fc\u30eb\u304c\u306a\u3044\u5834\u5408\u306b\u306fNA\u3068\u306a\u308b\u3002\n#MiscFeature: Miscellaneous feature not covered in other categories\n#\u305d\u306e\u4ed6\u306e\u5099\u3048\u4ed8\u3051\u3089\u308c\u3066\u3044\u308b\u8a2d\u5099\u3092\u8868\u3059\u3002\u30a8\u30ec\u30d9\u30fc\u30bf\u3084\u30c6\u30cb\u30b9\u30b3\u30fc\u30c8\u306a\u3069\u3002\u7279\u306b\u306a\u3044\u5834\u5408\u306fNA\u3068\u306a\u308b\u3002\n#Alley: Type of alley access to property\n#\u7269\u4ef6\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u305f\u3081\u306e\u9053\u306e\u7a2e\u985e\uff08\u7802\u5229\u306a\u306e\u304b\u8217\u88c5\u3055\u308c\u3066\u3044\u308b\u306e\u304b\uff09\u3092\u8868\u3059\u3002\u8a72\u5f53\u3057\u306a\u3044\u5834\u5408\u306fNA\u3068\u306a\u308b\n#Fence: Fence quality\n#\u30d5\u30a7\u30f3\u30b9\u306e\u8cea\u3092\u8868\u3059\u3002\u30d5\u30a7\u30f3\u30b9\u304c\u306a\u3044\u5834\u5408\u306fNA\u3068\u306a\u308b\u3002\n#FireplaceQu: Fireplace quality\n#\u6696\u7089\u306e\u54c1\u8cea\u3092\u8868\u3059\u3002\u6696\u7089\u304c\u306a\u3044\u5834\u5408\u306fNA\u3068\u306a\u308b\u3002\n#LotFrontage: Linear feet of street connected to property\n#\u7269\u4ef6\u306b\u96a3\u63a5\u3057\u305f\u9053\u8def\u306e\u9577\u3055\u3002\n#\u6b20\u640d\u5024\u304c\u591a\u3044\u5909\u6570\u306b\u95a2\u3057\u3066\u306f\u3001\u30c7\u30fc\u30bf\u304c\u6b20\u640d\u3057\u3066\u3044\u308b\u3068\u3044\u3046\u308f\u3051\u3067\u306f\u306a\u304f\u3001\u6b20\u640d\uff1d\u305d\u3082\u305d\u3082\u305d\u306e\u8a2d\u5099\u304c\u306a\u3044\u3053\u3068\u3092\u8868\u3057\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u306d\u3002\n#\u6b21\u306b\u6b20\u640d\u5024\u304c\u3042\u308b\u5909\u6570\u306e\u30c7\u30fc\u30bf\u578b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002",
      "rewrite-ns": 23507,
      "overhead-ns": 23507,
      "exec-ns": 84659,
      "total-ns": 108166,
      "patts-hit": {},
      "rewritten": ""
    },
    {
      "raw": "# \u6b20\u640d\u5024\u304c\u3042\u308b\u30ab\u30e9\u30e0\u3092\u30ea\u30b9\u30c8\u5316\nna_col_list = all_data.isnull().sum()[all_data.isnull().sum()>0].index.tolist()\n\n#\u6b20\u640d\u304c\u3042\u308b\u30ab\u30e9\u30e0\u306e\u30c7\u30fc\u30bf\u578b\u3092\u78ba\u8a8d\nall_data[na_col_list].dtypes.sort_values()",
      "rewrite-ns": 1367451,
      "overhead-ns": 1367451,
      "exec-ns": 4107171295,
      "total-ns": 4108538746,
      "patts-hit": {},
      "rewritten": "na_col_list = all_data.isnull().sum()[all_data.isnull().sum() > 0\n    ].index.tolist()\nall_data[na_col_list].dtypes.sort_values()\n"
    },
    {
      "raw": "#float\u3068object\u3067\u3059\u306d\u3002float\u578b\u306e\u5834\u5408\u306f0\u3001object\u306e\u5834\u5408\u306f\u201dNone\u201d\u3067\u7f6e\u63db\u3059\u308b\u3053\u3068\u306b\u3057\u307e\u3057\u3087\u3046\u3002\n#\u305f\u3060\u3057\u3001\u96a3\u63a5\u3057\u305f\u9053\u8def\u306e\u9577\u3055\uff08LotFrontage\uff09\u306b\u95a2\u3057\u3066\u306f\u540c\u3058\u5730\u533a\u3068\u4ed6\u306e\u7269\u4ef6\u3068\u540c\u3058\u3068\u601d\u308f\u308c\u308b\u306e\u3067\u3001\u540c\u3058\u5730\u533a\u306e\u4e2d\u592e\u5024\u3092\u3068\u308b\u3053\u3068\u306b\u3057\u307e\u3059\u3002",
      "rewrite-ns": 28408,
      "overhead-ns": 28408,
      "exec-ns": 119451,
      "total-ns": 147859,
      "patts-hit": {},
      "rewritten": ""
    },
    {
      "raw": "#\u96a3\u63a5\u3057\u305f\u9053\u8def\u306e\u9577\u3055\uff08LotFrontage\uff09\u306e\u6b20\u640d\u5024\u306e\u88dc\u5b8c\nall_data['LotFrontage'] = all_data.groupby('Neighborhood')['LotFrontage'].transform(lambda x: x.fillna(x.median()))\n\n#\u6b20\u640d\u5024\u304c\u5b58\u5728\u3059\u308b\u304b\u3064float\u578b\u306e\u30ea\u30b9\u30c8\u3092\u4f5c\u6210\nfloat_list = all_data[na_col_list].dtypes[all_data[na_col_list].dtypes == \"float64\"].index.tolist()\n\n#\u6b20\u640d\u5024\u304c\u5b58\u5728\u3059\u308b\u304b\u3064object\u578b\u306e\u30ea\u30b9\u30c8\u3092\u4f5c\u6210\nobj_list = all_data[na_col_list].dtypes[all_data[na_col_list].dtypes == \"object\"].index.tolist()\n\n#float\u578b\u306e\u5834\u5408\u306f\u6b20\u640d\u5024\u30920\u3067\u7f6e\u63db\nall_data[float_list] = all_data[float_list].fillna(0)\n\n#object\u578b\u306e\u5834\u5408\u306f\u6b20\u640d\u5024\u3092\"None\"\u3067\u7f6e\u63db\nall_data[obj_list] = all_data[obj_list].fillna(\"None\")\n\n#\u6b20\u640d\u5024\u304c\u5168\u3066\u7f6e\u63db\u3067\u304d\u3066\u3044\u308b\u304b\u78ba\u8a8d\nall_data.isnull().sum()[all_data.isnull().sum() > 0]",
      "rewrite-ns": 4355381,
      "overhead-ns": 4355381,
      "exec-ns": 8077772138,
      "total-ns": 8082127519,
      "patts-hit": {},
      "rewritten": "all_data['LotFrontage'] = all_data.groupby('Neighborhood')['LotFrontage'\n    ].transform(lambda x: x.fillna(x.median()))\nfloat_list = all_data[na_col_list].dtypes[all_data[na_col_list].dtypes ==\n    'float64'].index.tolist()\nobj_list = all_data[na_col_list].dtypes[all_data[na_col_list].dtypes ==\n    'object'].index.tolist()\nall_data[float_list] = all_data[float_list].fillna(0)\nall_data[obj_list] = all_data[obj_list].fillna('None')\nall_data.isnull().sum()[all_data.isnull().sum() > 0]\n"
    },
    {
      "raw": "#\u3055\u304d\u307b\u3069\u306f\u30ab\u30c6\u30b4\u30ea\u5909\u6570\u3092\u51e6\u7406\u3057\u307e\u3057\u305f\u304c\u3001\u7d9a\u3044\u3066\u306f\u6570\u5024\u5909\u6570\u3067\u3059\u3002\n#\u6570\u5024\u5909\u6570\u306f\u57fa\u672c\u306f\u305d\u306e\u307e\u307e\u30e2\u30c7\u30eb\u306e\u5165\u529b\u306b\u4f7f\u3048\u307e\u3059\u304c\u3001\u30c7\u30fc\u30bf\u4e0a\u306f\u6570\u5024\u3067\u3042\u3063\u3066\u3082\u5024\u306e\u5927\u304d\u3055\u3084\u9806\u756a\u306b\u610f\u5473\u306e\u306a\u3044\u3082\u306e\u306f\u30ab\u30c6\u30b4\u30ea\u5909\u6570\u3068\u3057\u3066\u6271\u3046\u3079\u304d\u3067\u3059\u3002\n#\u3082\u3046\u4e00\u5ea6\u30c7\u30fc\u30bf\u306e\u5b9a\u7fa9\u3092\u898b\u3066\u307f\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u5909\u6570\u306f\u6570\u5024\u5909\u6570\u3067\u306f\u306a\u304f\u30ab\u30c6\u30b4\u30ea\u5909\u6570\u3068\u3057\u3066\u6271\u3063\u305f\u307b\u3046\u304c\u826f\u3055\u305d\u3046\u3067\u3059\u3002\n\n#MSSubClass: Identifies the type of dwelling involved in the sale\n#\u4f4f\u5b85\u306e\u7a2e\u985e\u3092\u8868\u3059\u3002\u6570\u5024\u306f\u3069\u306e\u7a2e\u985e\u306b\u5f53\u3066\u306f\u307e\u308b\u304b\u3092\u8868\u3059\u3060\u3051\u3067\u5927\u304d\u3055\u3084\u9806\u5e8f\u306b\u610f\u5473\u306f\u306a\u3044\u3002\n#YrSold: Year Sold (YYYY)\n#\u8ca9\u58f2\u5e74\n#MoSold: Month Sold (MM)\n#\u8ca9\u58f2\u6708",
      "rewrite-ns": 44607,
      "overhead-ns": 44607,
      "exec-ns": 173010,
      "total-ns": 217617,
      "patts-hit": {},
      "rewritten": ""
    },
    {
      "raw": "# \u30ab\u30c6\u30b4\u30ea\u5909\u6570\u306b\u5909\u63db\u3059\u308b\nall_data['MSSubClass'] = all_data['MSSubClass'].apply(str)\nall_data['YrSold'] = all_data['YrSold'].astype(str)\nall_data['MoSold'] = all_data['MoSold'].astype(str)",
      "rewrite-ns": 1695346,
      "overhead-ns": 1695346,
      "exec-ns": 401034453,
      "total-ns": 402729799,
      "patts-hit": {},
      "rewritten": "all_data['MSSubClass'] = all_data['MSSubClass'].apply(str)\nall_data['YrSold'] = all_data['YrSold'].astype(str)\nall_data['MoSold'] = all_data['MoSold'].astype(str)\n"
    },
    {
      "raw": "#\u63a2\u7d22\u7684\u30c7\u30fc\u30bf\u5206\u6790\u306e\u30d5\u30a7\u30fc\u30ba\u3067\u76ee\u7684\u5909\u6570\u3067\u3042\u308bSalesPrice\u304c\u6b63\u898f\u5206\u5e03\u306b\u306a\u3063\u3066\u3044\u306a\u3044\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3057\u305f\u3002\n#\u3053\u3061\u3089\u3092\u6b63\u898f\u5206\u5e03\u306b\u5909\u63db\u3057\u307e\u3059\u3002",
      "rewrite-ns": 34926,
      "overhead-ns": 34926,
      "exec-ns": 132977,
      "total-ns": 167903,
      "patts-hit": {},
      "rewritten": ""
    },
    {
      "raw": "#\u76ee\u7684\u5909\u6570\u306e\u5bfe\u6570log(x+1)\u3092\u3068\u308b\ntrain_y = np.log1p(train_y)\n\n#\u5206\u5e03\u3092\u53ef\u8996\u5316\n# ALEX: remove plotting\n# plt.figure(figsize=(20, 10))\n# sns.distplot(train_y)",
      "rewrite-ns": 454252,
      "overhead-ns": 454252,
      "exec-ns": 1430114,
      "total-ns": 1884366,
      "patts-hit": {},
      "rewritten": "train_y = np.log1p(train_y)\n"
    },
    {
      "raw": "#\u540c\u69d8\u306b\u8aac\u660e\u5909\u6570\u306b\u95a2\u3057\u3066\u3082\u6b63\u898f\u5206\u5e03\u306b\u3057\u305f\u304c\u3063\u3066\u3044\u306a\u3044\u3082\u306e\u306f\u5bfe\u6570\u5909\u63db\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n#\u5404\u8aac\u660e\u5909\u6570\u306b\u5bfe\u3057\u3066\u6b6a\u5ea6\u3092\u8a08\u7b97\u3057\u30010.5\u3088\u308a\u3082\u5927\u304d\u3044\u5834\u5408\u306f\u5bfe\u6570\u5909\u63db\u3059\u308b\u3053\u3068\u306b\u3057\u307e\u3059\u3002",
      "rewrite-ns": 14922,
      "overhead-ns": 14922,
      "exec-ns": 86629,
      "total-ns": 101551,
      "patts-hit": {},
      "rewritten": ""
    },
    {
      "raw": "#\u6570\u5024\u306e\u8aac\u660e\u5909\u6570\u306e\u30ea\u30b9\u30c8\u3092\u4f5c\u6210\nnum_feats = all_data.dtypes[all_data.dtypes != \"object\" ].index\n\n#\u5404\u8aac\u660e\u5909\u6570\u306e\u6b6a\u5ea6\u3092\u8a08\u7b97\nskewed_feats = all_data[num_feats].apply(lambda x: x.skew()).sort_values(ascending = False)\n\n#\u30b0\u30e9\u30d5\u5316\n# ALEX: remove plotting\n# plt.figure(figsize=(20,10))\n# plt.xticks(rotation='90')\n# sns.barplot(x=skewed_feats.index, y=skewed_feats)\n_ = skewed_feats.index",
      "rewrite-ns": 1662365,
      "overhead-ns": 1676069,
      "exec-ns": 489999718,
      "total-ns": 491662083,
      "patts-hit": {},
      "rewritten": "num_feats = all_data.dtypes[all_data.dtypes != 'object'].index\nskewed_feats = all_data[num_feats].apply(lambda x: x.skew()).sort_values(\n    ascending=False)\n_ = skewed_feats.index\n"
    },
    {
      "raw": "#\u3061\u306a\u307f\u306bBox-Cox\u5909\u63db\u306f0\u4ee5\u4e0b\u306e\u5024\u3092\u3068\u308b\u5909\u6570\u306b\u306f\u4f7f\u7528\u3067\u304d\u306a\u3044\u305f\u3081\u3001\u5404\u5909\u6570\u306e\u6700\u5c0f\u5024\u3092\u898b\u3066\u307f\u307e\u3059\u3002",
      "rewrite-ns": 24132,
      "overhead-ns": 24132,
      "exec-ns": 109548,
      "total-ns": 133680,
      "patts-hit": {},
      "rewritten": ""
    },
    {
      "raw": "#\u6b6a\u5ea6\u306e\u7d76\u5bfe\u5024\u304c0.5\u3088\u308a\u5927\u304d\u3044\u5909\u6570\u3060\u3051\u306b\u7d5e\u308b\nskewed_feats_over = skewed_feats[abs(skewed_feats) > 0.5].index\n\n#\u5404\u5909\u6570\u306e\u6700\u5c0f\u5024\u3092\u8868\u793a\nfor i in skewed_feats_over:\n    print(min(all_data[i]))",
      "rewrite-ns": 1172181,
      "overhead-ns": 1172181,
      "exec-ns": 717020496,
      "total-ns": 718192677,
      "patts-hit": {},
      "rewritten": "skewed_feats_over = skewed_feats[abs(skewed_feats) > 0.5].index\nfor i in skewed_feats_over:\n    print(min(all_data[i]))\n"
    },
    {
      "raw": "#\u8ca0\u306e\u5024\u306f\u306a\u3044\u3067\u3059\u304c\u30010\u304c\u542b\u307e\u308c\u308b\u5909\u6570\u304c\u3042\u308a\u307e\u3059\u306d\u3001\u3001\u3001\n#\u4eca\u56de\u306fBox-Cox\u5909\u63db\u3067\u306f\u306a\u304f\u3001\uff10\u4ee5\u4e0b\u306e\u5024\u3092\u6301\u3064\u5909\u6570\u306b\u3082\u9069\u7528\u53ef\u80fd\u306aYeo-Johnson\u5909\u63db\u3092\u4f7f\u3044\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002",
      "rewrite-ns": 26129,
      "overhead-ns": 26129,
      "exec-ns": 109071,
      "total-ns": 135200,
      "patts-hit": {},
      "rewritten": ""
    },
    {
      "raw": "#Yeo-Johnson\u5909\u63db\n# ALEX: remove ML code\n# pt = PowerTransformer()\n# pt.fit(all_data[skewed_feats_over])\n\n# #\u5909\u63db\u5f8c\u306e\u30c7\u30fc\u30bf\u3067\u5404\u5217\u3092\u7f6e\u63db\n# all_data[skewed_feats_over] = pt.transform(all_data[skewed_feats_over])\n_ = all_data[skewed_feats_over]\nall_data[skewed_feats_over] = all_data[skewed_feats_over]\n\n#\u5404\u8aac\u660e\u5909\u6570\u306e\u6b6a\u5ea6\u3092\u8a08\u7b97\nskewed_feats_fixed = all_data[skewed_feats_over].apply(lambda x: x.skew()).sort_values(ascending = False)\n\n#\u30b0\u30e9\u30d5\u5316\n# ALEX: remove plotting\n# plt.figure(figsize=(20,10))\n# plt.xticks(rotation='90')\n# sns.barplot(x=skewed_feats_fixed.index, y=skewed_feats_fixed)\n_ = skewed_feats_fixed.index",
      "rewrite-ns": 1812103,
      "overhead-ns": 1817380,
      "exec-ns": 546808319,
      "total-ns": 548620422,
      "patts-hit": {},
      "rewritten": "_ = all_data[skewed_feats_over]\nall_data[skewed_feats_over] = all_data[skewed_feats_over]\nskewed_feats_fixed = all_data[skewed_feats_over].apply(lambda x: x.skew()\n    ).sort_values(ascending=False)\n_ = skewed_feats_fixed.index\n"
    },
    {
      "raw": "#\u540c\u3058\u304fSalesPrice\u3092\u4e88\u6e2c\u3059\u308b\u300cZillow Prize: Zillow\u2019s Home Value Prediction\u300d\u3067\u3001\u7269\u4ef6\u306e\u9762\u7a4d\u3092\u90e8\u5c4b\u6570\u3067\u5272\u3063\u305f\uff11\u90e8\u5c4b\u5f53\u305f\u308a\u306e\u9762\u7a4d\u3068\u3044\u3046\u7279\u5fb4\u91cf\u3092\u8ffd\u52a0\u3057\u305f\u3053\u3068\u3067\u7cbe\u5ea6\u304c\u4e0a\u304c\u3063\u305f\u3001\u3068\u3044\u3046\u3053\u3068\u304c\u3042\u3063\u305f\u305d\u3046\u306a\u306e\u3067\u4eca\u56de\u3082\u8ffd\u52a0\u3057\u3066\u307f\u307e\u3059\u3002",
      "rewrite-ns": 25902,
      "overhead-ns": 25902,
      "exec-ns": 110510,
      "total-ns": 136412,
      "patts-hit": {},
      "rewritten": ""
    },
    {
      "raw": "#\u7279\u5fb4\u91cf\u306b1\u90e8\u5c4b\u3042\u305f\u308a\u306e\u9762\u7a4d\u3092\u8ffd\u52a0\nall_data[\"FeetPerRoom\"] =  all_data[\"TotalSF\"]/all_data[\"TotRmsAbvGrd\"]\n\n#\u305d\u306e\u4ed6\u6709\u52b9\u305d\u3046\u306a\u3082\u306e\u3092\u8ffd\u52a0\u3059\u308b\n\n#\u5efa\u7bc9\u3057\u305f\u5e74\u3068\u30ea\u30d5\u30a9\u30fc\u30e0\u3057\u305f\u5e74\u306e\u5408\u8a08\nall_data['YearBuiltAndRemod']=all_data['YearBuilt']+all_data['YearRemodAdd']\n\n#\u30d0\u30b9\u30eb\u30fc\u30e0\u306e\u5408\u8a08\u9762\u7a4d\nall_data['Total_Bathrooms'] = (all_data['FullBath'] + (0.5 * all_data['HalfBath']) +\n                               all_data['BsmtFullBath'] + (0.5 * all_data['BsmtHalfBath']))\n\n#\u7e01\u5074\u306e\u5408\u8a08\u9762\u7a4d\nall_data['Total_porch_sf'] = (all_data['OpenPorchSF'] + all_data['3SsnPorch'] +\n                              all_data['EnclosedPorch'] + all_data['ScreenPorch'] +\n                              all_data['WoodDeckSF'])\n\n#\u30d7\u30fc\u30eb\u306e\u6709\u7121\nall_data['haspool'] = all_data['PoolArea'].apply(lambda x: 1 if x > 0 else 0)\n\n#2\u968e\u306e\u6709\u7121\nall_data['has2ndfloor'] = all_data['2ndFlrSF'].apply(lambda x: 1 if x > 0 else 0)\n\n#\u30ac\u30ec\u30fc\u30b8\u306e\u6709\u7121\nall_data['hasgarage'] = all_data['GarageArea'].apply(lambda x: 1 if x > 0 else 0)\n\n#\u5730\u4e0b\u5ba4\u306e\u6709\u7121\nall_data['hasbsmt'] = all_data['TotalBsmtSF'].apply(lambda x: 1 if x > 0 else 0)\n\n#\u6696\u7089\u306e\u6709\u7121\nall_data['hasfireplace'] = all_data['Fireplaces'].apply(lambda x: 1 if x > 0 else 0)",
      "rewrite-ns": 7181231,
      "overhead-ns": 7181231,
      "exec-ns": 533499930,
      "total-ns": 540681161,
      "patts-hit": {},
      "rewritten": "all_data['FeetPerRoom'] = all_data['TotalSF'] / all_data['TotRmsAbvGrd']\nall_data['YearBuiltAndRemod'] = all_data['YearBuilt'] + all_data['YearRemodAdd'\n    ]\nall_data['Total_Bathrooms'] = all_data['FullBath'] + 0.5 * all_data['HalfBath'\n    ] + all_data['BsmtFullBath'] + 0.5 * all_data['BsmtHalfBath']\nall_data['Total_porch_sf'] = all_data['OpenPorchSF'] + all_data['3SsnPorch'\n    ] + all_data['EnclosedPorch'] + all_data['ScreenPorch'] + all_data[\n    'WoodDeckSF']\nall_data['haspool'] = all_data['PoolArea'].apply(lambda x: 1 if x > 0 else 0)\nall_data['has2ndfloor'] = all_data['2ndFlrSF'].apply(lambda x: 1 if x > 0 else\n    0)\nall_data['hasgarage'] = all_data['GarageArea'].apply(lambda x: 1 if x > 0 else\n    0)\nall_data['hasbsmt'] = all_data['TotalBsmtSF'].apply(lambda x: 1 if x > 0 else 0\n    )\nall_data['hasfireplace'] = all_data['Fireplaces'].apply(lambda x: 1 if x > \n    0 else 0)\n"
    },
    {
      "raw": "#\u5404\u30ab\u30e9\u30e0\u306e\u30c7\u30fc\u30bf\u578b\u3092\u78ba\u8a8d\nall_data.dtypes.value_counts()",
      "rewrite-ns": 376172,
      "overhead-ns": 376172,
      "exec-ns": 1461296,
      "total-ns": 1837468,
      "patts-hit": {},
      "rewritten": "all_data.dtypes.value_counts()\n"
    },
    {
      "raw": "#\u30ab\u30c6\u30b4\u30ea\u5909\u6570\u306f46\u3064\u3042\u308a\u307e\u3059\u3002\n\n#\u5b66\u7fd2\u30c7\u30fc\u30bf\u306b\u306f\u5b58\u5728\u305b\u305a\u3001\u30c6\u30b9\u30c8\u30c7\u30fc\u30bf\u306e\u307f\u306b\u5b58\u5728\u3059\u308b\u30ab\u30c6\u30b4\u30ea\u5909\u6570\u304c\u5b58\u5728\u3059\u308b\u3068\u30e2\u30c7\u30eb\u304c\u305d\u306e\u30ab\u30c6\u30b4\u30ea\u3092\u5b66\u7fd2\u3067\u304d\u305a\u3001\u4e88\u6e2c\u5024\u304c\u304a\u304b\u3057\u304f\u306a\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002\n#\u30c6\u30b9\u30c8\u30c7\u30fc\u30bf\u306e\u307f\u306b\u5b58\u5728\u3059\u308b\u30ab\u30c6\u30b4\u30ea\u5909\u6570\u304c\u5b58\u5728\u3057\u306a\u3044\u304b\u3092\u78ba\u8a8d\u3057\u307e\u3057\u3087\u3046\u3002",
      "rewrite-ns": 24048,
      "overhead-ns": 24048,
      "exec-ns": 98729,
      "total-ns": 122777,
      "patts-hit": {},
      "rewritten": ""
    },
    {
      "raw": "#\u30ab\u30c6\u30b4\u30ea\u5909\u6570\u3068\u306a\u3063\u3066\u3044\u308b\u30ab\u30e9\u30e0\u3092\u53d6\u308a\u51fa\u3059\ncal_list = all_data.dtypes[all_data.dtypes==\"object\"].index.tolist()\n\n#\u5b66\u7fd2\u30c7\u30fc\u30bf\u306b\u304a\u3051\u308b\u30ab\u30c6\u30b4\u30ea\u5909\u6570\u306e\u30c7\u30fc\u30bf\u6570\u3092\u78ba\u8a8d\ntrain_x[cal_list].info()",
      "rewrite-ns": 1040658,
      "overhead-ns": 1040658,
      "exec-ns": 998383789,
      "total-ns": 999424447,
      "patts-hit": {},
      "rewritten": "cal_list = all_data.dtypes[all_data.dtypes == 'object'].index.tolist()\ntrain_x[cal_list].info()\n"
    },
    {
      "raw": "#\u5b66\u7fd2\u30c7\u30fc\u30bf\u306e\u4e2d\u306b\u6570\u304c0\u3068\u306a\u3063\u3066\u3044\u308b\u30ab\u30c6\u30b4\u30ea\u5909\u6570\u306f\u306a\u3044\u3088\u3046\u3067\u3059\u306e\u3067\u305d\u306e\u307e\u307e\u9032\u3081\u3066\u3044\u304d\u307e\u3059\u3002",
      "rewrite-ns": 25290,
      "overhead-ns": 25290,
      "exec-ns": 111055,
      "total-ns": 136345,
      "patts-hit": {},
      "rewritten": ""
    },
    {
      "raw": "#\u30ab\u30c6\u30b4\u30ea\u5909\u6570\u306e\u30a8\u30f3\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u65b9\u6cd5\u306f\u3055\u307e\u3056\u307e\u3042\u308a\u307e\u3059\u306e\u304c\u3001\u4eca\u56de\u306fone-hot-encoding\u306b\u3088\u3063\u3066\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u3057\u307e\u3059\u3002\n#one-hot-encoding\u3067\u306f\u3001\u5404\u30ab\u30c6\u30b4\u30ea\u5909\u6570\u3092\uff080,1\uff09\u306e\u4e8c\u5024\u5909\u6570\u3092\u305d\u308c\u305e\u308c\u4f5c\u6210\u3057\u307e\u3059\u3002\u3053\u308c\u3089\u306e\u4e8c\u5024\u5909\u6570\u306f\u300c\u30c0\u30df\u30fc\u5909\u6570\u300d\u3068\u547c\u3070\u308c\u307e\u3059\u3002\n\n#pandas\u306eget_dummies\u95a2\u6570\u3067one-hot-encoding\u3092\u884c\u3044\u307e\u3059\u3002",
      "rewrite-ns": 20838,
      "overhead-ns": 20838,
      "exec-ns": 85184,
      "total-ns": 106022,
      "patts-hit": {},
      "rewritten": ""
    },
    {
      "raw": "#\u30ab\u30c6\u30b4\u30ea\u5909\u6570\u3092get_dummies\u306b\u3088\u308bone-hot-encoding\u3092\u884c\u3046\nall_data = pd.get_dummies(all_data,columns=cal_list)\n\n#\u30b5\u30a4\u30ba\u3092\u78ba\u8a8d\nall_data.shape",
      "rewrite-ns": 542020,
      "overhead-ns": 542020,
      "exec-ns": 1656496072,
      "total-ns": 1657038092,
      "patts-hit": {},
      "rewritten": "all_data = pd.get_dummies(all_data, columns=cal_list)\nall_data.shape\n"
    },
    {
      "raw": "#\u524d\u51e6\u7406\u3068\u30a8\u30f3\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u304c\u7d42\u308f\u3063\u305f\u306e\u3067\u30c7\u30fc\u30bf\u3092\u5b66\u7fd2\u30c7\u30fc\u30bf\u3068\u30c6\u30b9\u30c8\u30c7\u30fc\u30bf\u306b\u5206\u5272\u3057\u3066\u304a\u304d\u307e\u3059\u3002",
      "rewrite-ns": 26186,
      "overhead-ns": 26186,
      "exec-ns": 107231,
      "total-ns": 133417,
      "patts-hit": {},
      "rewritten": ""
    },
    {
      "raw": "#\u5b66\u7fd2\u30c7\u30fc\u30bf\u3068\u30c6\u30b9\u30c8\u30c7\u30fc\u30bf\u306b\u518d\u5206\u5272\ntrain_x = all_data.iloc[:train_x.shape[0],:].reset_index(drop=True)\ntest_x = all_data.iloc[train_x.shape[0]:,:].reset_index(drop=True)\n\n#\u30b5\u30a4\u30ba\u3092\u78ba\u8a8d\nprint(\"train_x: \"+str(train_x.shape))\nprint(\"test_x: \"+str(test_x.shape))",
      "rewrite-ns": 2452294,
      "overhead-ns": 2452294,
      "exec-ns": 253225099,
      "total-ns": 255677393,
      "patts-hit": {},
      "rewritten": "train_x = all_data.iloc[:train_x.shape[0], :].reset_index(drop=True)\ntest_x = all_data.iloc[train_x.shape[0]:, :].reset_index(drop=True)\nprint('train_x: ' + str(train_x.shape))\nprint('test_x: ' + str(test_x.shape))\n"
    },
    {
      "raw": "# ALEX: remove ML code\n# from sklearn.ensemble import RandomForestRegressor,  GradientBoostingRegressor\n# from sklearn.model_selection import KFold, cross_val_score, train_test_split\n# from sklearn.metrics import mean_squared_error\n# import xgboost as xgb\n# from sklearn.model_selection import GridSearchCV\n# import lightgbm as lgb",
      "rewrite-ns": 27588,
      "overhead-ns": 27588,
      "exec-ns": 110060,
      "total-ns": 137648,
      "patts-hit": {},
      "rewritten": ""
    },
    {
      "raw": "#\u30e2\u30c7\u30eb\u306e\u8a55\u4fa1\u7528\u306b\u5b66\u7fd2\u30c7\u30fc\u30bf\u3092\u5b66\u7fd2\u306b\u4f7f\u7528\u3059\u308b\u30c7\u30fc\u30bf\u3068\u8a55\u4fa1\u7528\u30c7\u30fc\u30bf\uff08\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u30c7\u30fc\u30bf\uff09\u306b\u5206\u5272\u3057\u307e\u3059\u3002",
      "rewrite-ns": 18918,
      "overhead-ns": 18918,
      "exec-ns": 81412,
      "total-ns": 100330,
      "patts-hit": {},
      "rewritten": ""
    },
    {
      "raw": "# \u30c7\u30fc\u30bf\u306e\u5206\u5272\n# ALEX: remove ML code\n# train_x, valid_x, train_y, valid_y = train_test_split(\n#         train_x,\n#         train_y,\n#         test_size=0.3,\n#         random_state=0)",
      "rewrite-ns": 14593,
      "overhead-ns": 14593,
      "exec-ns": 65119,
      "total-ns": 79712,
      "patts-hit": {},
      "rewritten": ""
    },
    {
      "raw": "#\u6700\u8fd1\u3001kaggle\u3067\u4eba\u6c17\u3060\u3068\u8a00\u308f\u308c\u3066\u3044\u308bGBDT\uff08\u52fe\u914d\u30d6\u30fc\u30b9\u30c6\u30a3\u30f3\u30b0\u6728\uff09\u3067\u30e2\u30c7\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002GBDT\u306f\u30e9\u30f3\u30c0\u30e0\u30d5\u30a9\u30ec\u30b9\u30c8\u3068\u52fe\u914d\u30d6\u30fc\u30b9\u30c6\u30a3\u30f3\u30b0\uff08Gradient Boosting\uff09\u3092\u7d44\u307f\u5408\u308f\u305b\u305f\u30a2\u30f3\u30b5\u30f3\u30d6\u30eb\u3067\u3059\u3002GBDT\u306b\u306f\u4ee5\u4e0b\u306e\u7279\u5fb4\u304c\u3042\u308a\u307e\u3059\u3002\n\n#\u7279\u5fb4\u91cf\u306f\u6570\u5024\u3067\u3042\u308b\u5fc5\u8981\u304c\u3042\u308b\n#\u6b20\u640d\u5024\u306e\u88dc\u5b8c\u304c\u4e0d\u8981",
      "rewrite-ns": 12315,
      "overhead-ns": 12315,
      "exec-ns": 55243,
      "total-ns": 67558,
      "patts-hit": {},
      "rewritten": ""
    },
    {
      "raw": "#\u7279\u5fb4\u91cf\u3068\u76ee\u7684\u5909\u6570\u3092xgboost\u306e\u30c7\u30fc\u30bf\u69cb\u9020\u306b\u5909\u63db\u3059\u308b\n# ALEX: remove ML code\n# dtrain = xgb.DMatrix(train_x, label=train_y)\n# dvalid = xgb.DMatrix(valid_x,label=valid_y)\n\n# #\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u6307\u5b9a\u3057\u3066GBDT\n# num_round = 5000\n# evallist = [(dvalid, 'eval'), (dtrain, 'train')]\n\n# evals_result = {}\n\n# #\u30d1\u30e9\u30e1\u30fc\u30bf\n# param = {\n#             'max_depth': 3,\n#             'eta': 0.01,\n#             'objective': 'reg:squarederror',\n# }\n\n# #\u5b66\u7fd2\u306e\u5b9f\u884c\n# bst = xgb.train(\n#                         param, dtrain,\n#                         num_round,\n#                         evallist,\n#                         evals_result=evals_result,\n#                         # \u4e00\u5b9a\u30e9\u30a6\u30f3\u30c9\u56de\u3057\u3066\u3082\u6539\u5584\u304c\u898b\u8fbc\u3081\u306a\u3044\u5834\u5408\u306f\u5b66\u7fd2\u3092\u6253\u3061\u5207\u308b\n#                         early_stopping_rounds=1000\n# )",
      "rewrite-ns": 16810,
      "overhead-ns": 16810,
      "exec-ns": 53853,
      "total-ns": 70663,
      "patts-hit": {},
      "rewritten": ""
    },
    {
      "raw": "#\u5b66\u7fd2\u66f2\u7dda\u3092\u53ef\u8996\u5316\u3059\u308b\n# ALEX: remove plotting, ML code\n# plt.figure(figsize=(20, 10))\n# train_metric = evals_result['train']['rmse']\n# plt.plot(train_metric, label='train rmse')\n# eval_metric = evals_result['eval']['rmse']\n# plt.plot(eval_metric, label='eval rmse')\n# plt.grid()\n# plt.legend()\n# plt.xlabel('rounds')\n# plt.ylabel('rmse')\n# plt.ylim(0, 0.3)\n# plt.show()",
      "rewrite-ns": 12570,
      "overhead-ns": 12570,
      "exec-ns": 57554,
      "total-ns": 70124,
      "patts-hit": {},
      "rewritten": ""
    },
    {
      "raw": "#\u7279\u5fb4\u91cf\u3054\u3068\u306e\u91cd\u8981\u5ea6\u3092\u53ef\u8996\u5316\u3059\u308b\n# ALEX: remove plotting\n# ax = xgb.plot_importance(bst)\n# fig = ax.figure\n# fig.set_size_inches(10, 30)",
      "rewrite-ns": 10769,
      "overhead-ns": 10769,
      "exec-ns": 55151,
      "total-ns": 65920,
      "patts-hit": {},
      "rewritten": ""
    },
    {
      "raw": "# ALEX: remove ML code\n# dtest = xgb.DMatrix(test_x)\nmy_submission = pd.DataFrame()\nmy_submission[\"Id\"] = test_ID\n# ALEX: remove ML code\n# my_submission[\"SalePrice\"] = np.exp(bst.predict(dtest))\n# you could use any filename. We choose submission here\nmy_submission.to_csv('submission.csv', index=False)",
      "rewrite-ns": 948792,
      "overhead-ns": 948792,
      "exec-ns": 166724262,
      "total-ns": 167673054,
      "patts-hit": {},
      "rewritten": "my_submission = pd.DataFrame()\nmy_submission['Id'] = test_ID\nmy_submission.to_csv('submission.csv', index=False)\n"
    }
  ],
  "total-time-in-sec": 25.000093073,
  "max-disk-in-mb": 0
}